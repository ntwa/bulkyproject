"use strict";function moveScroller(){var e=$("#scroller").width(),t=function(){var t=$(window).scrollTop(),n=$("#scroller-anchor").offset().top,r=$("#scroller"),i=StackExchange.scrollPadding.getPaddingTop(),a=i+"px";t>n-i?r.height()>$(window).height()?r.css({"position":"fixed","top":"","bottom":"0","width":e,"z-index":3}):r.css({"position":"fixed","top":a,"bottom":"","width":e,"z-index":3}):n>=t&&r.css({"position":"relative","top":"","bottom":""})};$(window).scroll(t).resize(t),t()}function sanitizeAndSplitTags(e,t,n,r){e=$.trim(e).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");for(var i=e.split(/[\s|,;]+/),a=[],s=0;s<i.length;s++){var o=i[s];r||(o=o.toLowerCase()),StackExchange.settings.tags.allowNonAsciiTags||(o=StackExchange.helpers.noDiacritics(o)),o=o.replace(/_/g,"-");var u=(r?"[^A-Za-z0-9.#+":"[^a-z0-9.#+")+(t?"*":"")+(StackExchange.settings.tags.allowNonAsciiTags?"0-9,A-Z,_,a-z,ª,µ,º,À-Ö,Ø-ö,ø-ˁ,ˆ-ˑ,ˠ-ˤ,ˬ,ˮ,Ͱ-ʹ,Ͷ-ͷ,ͺ-ͽ,Ά,Έ-Ί,Ό,Ύ-Ρ,Σ-ϵ,Ϸ-ҁ,Ҋ-ԣ,Ա-Ֆ,ՙ,ա-և,א-ת,װ-ײ,ء-ي,٠-٩,ٮ-ٯ,ٱ-ۓ,ە,ۥ-ۦ,ۮ-ۼ,ۿ,ܐ,ܒ-ܯ,ݍ-ޥ,ޱ,߀-ߪ,ߴ-ߵ,ߺ,ऄ-ह,ऽ,ॐ,क़-ॡ,०-९,ॱ-ॲ,ॻ-ॿ,অ-ঌ,এ-ঐ,ও-ন,প-র,ল,শ-হ,ঽ,ৎ,ড়-ঢ়,য়-ৡ,০-ৱ,ਅ-ਊ,ਏ-ਐ,ਓ-ਨ,ਪ-ਰ,ਲ-ਲ਼,ਵ-ਸ਼,ਸ-ਹ,ਖ਼-ੜ,ਫ਼,੦-੯,ੲ-ੴ,અ-ઍ,એ-ઑ,ઓ-ન,પ-ર,લ-ળ,વ-હ,ઽ,ૐ,ૠ-ૡ,૦-૯,ଅ-ଌ,ଏ-ଐ,ଓ-ନ,ପ-ର,ଲ-ଳ,ଵ-ହ,ଽ,ଡ଼-ଢ଼,ୟ-ୡ,୦-୯,ୱ,ஃ,அ-ஊ,எ-ஐ,ஒ-க,ங-ச,ஜ,ஞ-ட,ண-த,ந-ப,ம-ஹ,ௐ,௦-௯,అ-ఌ,ఎ-ఐ,ఒ-న,ప-ళ,వ-హ,ఽ,ౘ-ౙ,ౠ-ౡ,౦-౯,ಅ-ಌ,ಎ-ಐ,ಒ-ನ,ಪ-ಳ,ವ-ಹ,ಽ,ೞ,ೠ-ೡ,೦-೯,അ-ഌ,എ-ഐ,ഒ-ന,പ-ഹ,ഽ,ൠ-ൡ,൦-൯,ൺ-ൿ,අ-ඖ,ක-න,ඳ-ර,ල,ව-ෆ,ก-ะ,า-ำ,เ-ๆ,๐-๙,ກ-ຂ,ຄ,ງ-ຈ,ຊ,ຍ,ດ-ທ,ນ-ຟ,ມ-ຣ,ລ,ວ,ສ-ຫ,ອ-ະ,າ-ຳ,ຽ,ເ-ໄ,ໆ,໐-໙,ໜ-ໝ,ༀ,༠-༩,ཀ-ཇ,ཉ-ཬ,ྈ-ྋ,က-ဪ,ဿ-၉,ၐ-ၕ,ၚ-ၝ,ၡ,ၥ-ၦ,ၮ-ၰ,ၵ-ႁ,ႎ,႐-႙,Ⴀ-Ⴥ,ა-ჺ,ჼ,ᄀ-ᅙ,ᅟ-ᆢ,ᆨ-ᇹ,ሀ-ቈ,ቊ-ቍ,ቐ-ቖ,ቘ,ቚ-ቝ,በ-ኈ,ኊ-ኍ,ነ-ኰ,ኲ-ኵ,ኸ-ኾ,ዀ,ዂ-ዅ,ወ-ዖ,ዘ-ጐ,ጒ-ጕ,ጘ-ፚ,ᎀ-ᎏ,Ꭰ-Ᏼ,ᐁ-ᙬ,ᙯ-ᙶ,ᚁ-ᚚ,ᚠ-ᛪ,ᜀ-ᜌ,ᜎ-ᜑ,ᜠ-ᜱ,ᝀ-ᝑ,ᝠ-ᝬ,ᝮ-ᝰ,ក-ឳ,ៗ,ៜ,០-៩,᠐-᠙,ᠠ-ᡷ,ᢀ-ᢨ,ᢪ,ᤀ-ᤜ,᥆-ᥭ,ᥰ-ᥴ,ᦀ-ᦩ,ᧁ-ᧇ,᧐-᧙,ᨀ-ᨖ,ᬅ-ᬳ,ᭅ-ᭋ,᭐-᭙,ᮃ-ᮠ,ᮮ-᮹,ᰀ-ᰣ,᱀-᱉,ᱍ-ᱽ,ᴀ-ᶿ,Ḁ-ἕ,Ἐ-Ἕ,ἠ-ὅ,Ὀ-Ὅ,ὐ-ὗ,Ὑ,Ὓ,Ὕ,Ὗ-ώ,ᾀ-ᾴ,ᾶ-ᾼ,ι,ῂ-ῄ,ῆ-ῌ,ῐ-ΐ,ῖ-Ί,ῠ-Ῥ,ῲ-ῴ,ῶ-ῼ,‿-⁀,⁔,ⁱ,ⁿ,ₐ-ₔ,ℂ,ℇ,ℊ-ℓ,ℕ,ℙ-ℝ,ℤ,Ω,ℨ,K-ℭ,ℯ-ℹ,ℼ-ℿ,ⅅ-ⅉ,ⅎ,Ↄ-ↄ,Ⰰ-Ⱞ,ⰰ-ⱞ,Ⱡ-Ɐ,ⱱ-ⱽ,Ⲁ-ⳤ,ⴀ-ⴥ,ⴰ-ⵥ,ⵯ,ⶀ-ⶖ,ⶠ-ⶦ,ⶨ-ⶮ,ⶰ-ⶶ,ⶸ-ⶾ,ⷀ-ⷆ,ⷈ-ⷎ,ⷐ-ⷖ,ⷘ-ⷞ,ⸯ,々-〆,〱-〵,〻-〼,ぁ-ゖ,ゝ-ゟ,ァ-ヺ,ー-ヿ,ㄅ-ㄭ,ㄱ-ㆎ,ㆠ-ㆷ,ㇰ-ㇿ,㐀-䶵,一-鿃,ꀀ-ꒌ,ꔀ-ꘌ,ꘐ-ꘫ,Ꙁ-ꙟ,Ꙣ-ꙮ,ꙿ-ꚗ,ꜗ-ꜟ,Ꜣ-ꞈ,Ꞌ-ꞌ,ꟻ-ꠁ,ꠃ-ꠅ,ꠇ-ꠊ,ꠌ-ꠢ,ꡀ-ꡳ,ꢂ-ꢳ,꣐-꣙,꤀-ꤥ,ꤰ-ꥆ,ꨀ-ꨨ,ꩀ-ꩂ,ꩄ-ꩋ,꩐-꩙,가-힣,豈-鶴,侮-頻,並-龎,ﬀ-ﬆ,ﬓ-ﬗ,יִ,ײַ-ﬨ,שׁ-זּ,טּ-לּ,מּ,נּ-סּ,ףּ-פּ,צּ-ﮱ,ﯓ-ﴽ,ﵐ-ﶏ,ﶒ-ﷇ,ﷰ-ﷻ,︳-︴,﹍-﹏,ﹰ-ﹴ,ﹶ-ﻼ,０-９,Ａ-Ｚ,＿,ａ-ｚ,ｦ-ﾾ,ￂ-ￇ,ￊ-ￏ,ￒ-ￗ,ￚ-ￜ":"")+"-]";o=o.replace(new RegExp(u,"g"),""),o=o.replace(/^[#+-]+/,""),o=o.replace(/[.-]+$/,""),o.length>0&&(-1==a.indexOf(o)||n&&("or"==o||"and"==o||"not"==o))&&a.push(o)}return a}function initTagRenderer(e,t){window.tagRenderer||(window.tagRendererRaw=function(n,r,i){r=r||"",i=i||"a";var a="";r||(e&&$.inArray(n,e)>-1?a="required-tag":t&&$.inArray(n,t)>-1&&(a="moderator-tag"));var s=$("<"+i+">").addClass("post-tag").addClass(a).text(n);return"a"===i.toLowerCase()&&s.attr({"rel":"tag","href":r+"/questions/tagged/"+encodeURIComponent(n),"title":function(e){return"show questions tagged '"+e.tag+"'"}({"tag":n})}),s.outerHTML()},window.tagRenderer=function(e,t,n){return $(tagRendererRaw(e,t,n))})}function showFadingHelpText(e){e.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var e={"wmd-input":"#how-to-format","tagnames":"#how-to-tag","tag-editor":"#how-to-tag","title":"#how-to-title","wmd-input-42":"#how-to-format","edit-comment":"#how-to-comment"},t=$(".wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42, .edit-comment"),n=function(t){var n=$(t);return n.parent().hasClass("tag-editor")&&!n.closest(".js-mentions-input").length?e["tag-editor"]:n.hasClass("wmd-input")?e["wmd-input"]:n.hasClass("edit-comment")?e["edit-comment"]:e[$(t).attr("id")]};t.focus(function(){var e=n(this);t.each(function(){var t=n(this);t!=e&&$(t).hide()});var r=$(e);r.is(":visible")||showFadingHelpText(r)})}!function(e){function t(){}function n(e,t){if(a)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}var r=t.prototype,i=[],a=i.indexOf?!0:!1;r.getListeners=function(e){var t=this._events||(this._events={});return t[e]||(t[e]=[])},r.addListener=function(e,t){var r=this.getListeners(e);return-1===n(t,r)&&r.push(t),this},r.removeListener=function(e,t){var r=this.getListeners(e),i=n(t,r);return-1!==i&&(r.splice(i,1),0===r.length&&(this._events[e]=null)),this},r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"==typeof t)for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):s.call(this,r,i));else for(r=n.length;r--;)a.call(this,t,n[r]);return this},r.removeEvent=function(e){return e?this._events[e]=null:this._events=null,this},r.emitEvent=function(e,t){for(var n=this.getListeners(e),r=n.length;r--;)n[r].apply(null,t||i)===!0&&this.removeListener(e,n[r]);return this},"function"==typeof define&&define.amd?define(function(){return t}):e.EventEmitter=t}(this);var StackExchange=StackExchange||{};StackExchange.realtime=function(){function e(){return{"creationfailed":null,"onopen":null,"onmessage":null,"onclose":null,"onerror":null}}function t(t){function n(e,t){tt&&tt.contentWindow&&tt.contentWindow.postMessage({"cmd":e,"data":t},c)}function r(e,t){if(!e.data||!e.data.evt)return o("WARNING: Unknown data received from worker: "+JSON.stringify(e)),void 0;switch(e.data.evt){case"tabId":a=e.data.content,o("this tab gets assigned id "+a);break;case"ws-wasopen":i=!0,s=1,!u&&t.open&&t.open(),u=!0;break;case"ws-onopen":i=!0,s=e.data.content,t.open&&t.open(),u=!0;break;case"ws-onclose":i=!1,u=!1,o("socket has closed"),t.close&&t.close();break;case"ws-onerror":i=!1,u=!1,t.error&&t.error();break;case"ws-onmessage":t.message&&t.message(e.data.content);break;case"ws-creationfailed":t.creationfailed&&t.creationfailed(e.data.content);break;case"log":o("worker says: "+e.data.content);break;case"error":o("Web worker failed");break;default:o("WARNING: Unknown message received from worker: "+e.data.evt)}}var i=!1,a=-1,s=null,u=!1,c=StackExchange.options.realtime.workerIframeDomain,l={"close":function(){n("close")},"send":function(e,t){n("send",{"tabId":e,"message":t})},"open":function(e){n("open",{"endpoint":e,"useMozWebsockets":!("WebSocket"in window)})},"detach":function(e){n("detach",e)},"keepalive":function(e){n("keepalive",e)}};return K||(R=window.onunload,K=!0),window.onunload=function(){R&&R(),-1!==a&&(o("detaching from worker..."),l.detach(a),a=-1)},setInterval(function(){-1===a||X||Q||l.keepalive(a)},1e4),{"on":new e,"isOpen":function(){return i},"readyState":function(){return s},"start":function(){var e=this.on;tt=$("#websocket-worker-iframe")[0],window.onmessage=function(t){"*"===c||t.origin===c?r(t,e):o("WARNING!!! worker iframe origin is not what I expected. Got: "+t.origin+" - Expected: "+c)},tt.contentWindow.postMessage("START",c)},"close":function(){l.close()},"dispose":function(){-1!==a&&l.detach(a),tt=null},"send":function(e){l.send(a,e)},"open":function(){l.open(t)}}}function n(t){function n(){try{return"WebSocket"in window?new WebSocket(t):new MozWebSocket(t)}catch(e){return e.message}}var r;return{"on":new e,"isOpen":function(){return r&&1===r.readyState},"readyState":function(){return r?r.readyState:null},"start":function(){if(!r){var e=this.on,t=n();"string"==typeof t?e.creationfailed&&e.creationfailed(t):(r=t,r.onopen=function(){e.open&&e.open()},r.onclose=function(){e.close&&e.close(),r=null},r.onmessage=function(t){e.message&&e.message(t)},r.onerror=function(){e.error&&e.error(),r=null})}},"close":function(){r&&(r.close(),r=null)},"dispose":function(){this.close()},"send":function(e){r&&r.send(e)},"open":function(){}}}function r(){U&&(U.dispose(),U=null)}function i(e){return!Q&&StackExchange.options.realtime.useWebWorkers&&"undefined"!=typeof SharedWorker?(o("using a shared web worker for web socket connection"),Y=!0,nt||(nt=new t(e))):(o("NOT using a web worker for web socket connection"),Y=!1,new n(e))}function a(e){var t=e.split(","),n=t.length,a=V%n,c=t[a],l=StackExchange.options.realtime.staleDisconnectIntervalInHours;if("WebSocket"in window||"MozWebSocket"in window){if(U)return;if(U=new i(c),null===U)return;U.on.open=function(){if(J||(J=!0),V=0,o("WebSocket opened"),U&&1===U.readyState()){var e="",t=StackExchange.options;if(t){var e="|";t.routeName&&(e+=t.routeName.toString()),e+="|",t.user&&t.user.userId&&(e+=t.user.userId.toString()),e+="|",t.user&&t.user.accountId&&(e+=t.user.accountId.toString()),e+="|",t.user&&t.user.rep&&(e+=t.user.rep.toString()),e=e+"|"+window.location.host+"|",t.serverTime&&(e+=t.serverTime.toString()),e+="|",o("analytic: "+e),U.send(e)}}s(),u(),setInterval(O,6e4),l>0&&setTimeout(F,1e3*l*60*60)},U.on.message=function(t){var n=$.parseJSON(t.data||t);if("realtime-broadcast"===n.action){o("broadcast message - "+n.data);var i=$.parseJSON(n.data).a;"killWebSocket"===i||"restartWebSocket"===i?(o("Applying action: "+i),X="killWebSocket"===i,X?r():U.close()):"revertToDirectSocket"===i&&Y&&(Q=!0,o("Direct socket usage forced remotely"),r(),StackExchange.realtime.init(e))}else et.emitEvent(n.action,[n.data])},U.on.close=function(){U=null,o("WebSocket closed"),!X&&5>V&&W>0&&(V++,W--,o("reconnect attempt:"+V+" max retries:"+W),setTimeout(function(){StackExchange.realtime.init(e)},(new Date).getTime()%50/20*1e3))},U.on.error=function(){o("WebSocket failed"),r()},U.on.creationfailed=function(e){o("Sockets disabled - "+e),r()},U.start(),G.length>0&&U&&U.open()}}function s(){if(null!=U&&U.isOpen())for(var e=0,t=G.length;t>e;e++)o("sending "+G[e]),U.send(G[e])}function o(e){(StackExchange&&StackExchange.options&&StackExchange.options.enableLogging||$&&$.cookie&&$.cookie("devlog"))&&console.log("realtime: "+e)}function u(){et.addListener("hb",function(e){o("heartbeat received; responding"),U.send(e)})}function c(e,t){G.push(e),t=t===!1?!1:!0,t&&s()}function l(e,t){et.removeListener(e,t),d(e)}function p(e,t){et.addListener(e,t),c(e)}function d(e){o("unsubscribing "+e);var t=$.inArray(e,G);-1!=t&&(G.splice(t,1),null!=U&&U.isOpen()&&U.send("-"+e))}function h(e,t){var n=e+"-question-"+t;d(n)}function f(e,t){var n=e+"-question-"+t;c(n),et.addListener(n,function(e){if(!StackExchange.realtime.pauseQuestionNotifications){var t=$.parseJSON(e);if(t.acctid!=StackExchange.options.user.accountId)switch(o(n+" "+e),t.a){case"score":C(t);break;case"comment-add":v(t);break;case"answer-add":L(t);break;case"accept":m(t);break;case"unaccept":m(t,!0);break;case"post-edit":q(t);break;case"post-deleted":g(t)}}})}function g(e){var t=e.aId||e.qId,n=!!e.aId,r=n?$("#answer-"+e.aId):$("#question");r.css("opacity",.1);var i=$('<div class="realtime-post-deleted-notification" />').css({"width":r.outerWidth(),"height":r.outerHeight()});i.insertBefore(r);var a=StackExchange.options.user.canSeeDeletedPosts?"This post has been deleted - click to refresh the page":"This post has been deleted and is no longer viewable",s=$("<p>").text(a).appendTo(i);s.click(function(){window.location.reload(!0)}),$(".popup[data-postid="+t+"]").fadeOutAndRemove()}function m(e,t){1!=$("#vote-accepted-"+e.answerid).length&&($(".vote-accepted-on").remove(),t||$('.vote input[value="'+e.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on","title":"The question owner accepted this as the best answer","text":"accepted"})))}function v(e){0==$("#comment-"+e.commentid).length&&StackExchange.comments.realtimeMessage(e.id)}function b(e,t,n,r,i,a,s){var u=e+"-"+t;j=n,Z=a,c(u),et.addListener(u,function(e){o("received (active) on "+u);var n=$.parseJSON(e);if(null!=i)for(var a=0;a<i.length;a++)if(-1==$.inArray(i[a],n.tags))return;P(n,r,t),null!=s&&s(n)})}function k(e){c(e+"-qcnt-feed"),et.addListener(e+"-qcnt-feed",function(e){$("div#q-cnt").html(e)}),c(e+"-evc-feed"),et.addListener(e+"-evc-feed",function(e){$("div#evc-cnt").html(e)}),c(e+"-acnt-feed"),et.addListener(e+"-acnt-feed",function(e){$("div#a-cnt").html(e)})}function w(e){var t=e+"-review-dashboard-update";c(t),et.addListener(t,function(e){var t=$.parseJSON(e),n=$('.dashboard-activity[data-review-task="'+t.i+'"]');0==n.find('.dashboard-user[data-user="'+t.u+'"]').length&&(n.find(".dashboard-user:nth-child(6)").remove(),n.css("overflow","hidden"),n.children().css({"left":"-44px"}),n.prepend(t.html).children().animate({"left":0},function(){n.css("overflow","visible")}))})}function x(){if(null!=StackExchange.options.user.accountId){var e=StackExchange.options.user.accountId+"-topbar";c(e),et.addListener(e,function(e){StackExchange.topbar.handleRealtimeMessage(e)})}}function E(e){if(null!=StackExchange.options.user.accountId){var t=e+"-"+StackExchange.options.user.userId+"-reputation";c(t),et.addListener(t,function(e){A(e)})}}function y(e){var t=e+"-suggested-edits-count-update";c(t),et.addListener(t,function(){S()})}function C(e){var t=$('.vote input[value="'+e.id+'"]').siblings(".vote-count-post");t.text()!=e.score&&(t.text(e.score),0==$(":animated").length&&t.fadeTo("fast",.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts())}function A(e){var t=$("#hlinks .reputation-score, .links-container .reputation, .js-header-rep");t.text()!=e.score&&(0==$(":animated").length&&t.fadeTo("fast",.8).fadeTo("fast",1),t.text(e).attr("title",function(e){return"your reputation: "+e.reputation}({"reputation":e})),t.trigger("reputationchange"))}function S(){$.ajax({"type":"POST","url":"/review/suggested-edit-count","data":{"fkey":StackExchange.options.user.fkey},"dataType":"json","success":function(e){e&&e.count&&_(e.count)}})}function _(e){var t=$(".suggested-edits-count");t.text()!=e&&(0==$(":animated").length&&t.fadeTo("fast",.5).fadeTo("fast",1),t.text(e))}function L(e){if(0==$("#answer-"+e.answerid).length&&(z.push(e.answerid),StackExchange.cardiologist)){if(StackExchange.cardiologist.isHeartBeating()){var t=StackExchange.helpers.DelayedReaction(D,5e3);t.trigger()}else D();StackExchange.cardiologist.notifiedOfNewAnswer()}}function D(){$("#new-answer-activity").remove(),$("#answers-header").prepend(rt)}function q(e){var t=$(".question[data-questionid="+e.id+"], .answer[data-answerid="+e.id+"]");if(!(t.find(".new-post-activity[data-postid="+e.id+"]").length>0)){var n=$('<div class="new-post-activity" data-postid="'+e.id+'">').append($('<a href="#">').text("an edit has been made to this post; click to load")),r=0===t.find(".inline-editor").length,i=function(){$(".new-post-activity[data-postid="+e.id+"]").remove(),r&&t.off("click",i),0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({"postIdsSemiColonDelimited":e.id}),it(t.find(".postcell, .answercell"),e)),$(document).trigger("refreshEdit",e.id)};r&&t.click(i),n.prependTo(t).find("a").click(function(e){return e.stopPropagation(),i(),!1})}}function T(){$("#tabs").show(),$("#new-answer-activity").remove();var e=$("#answers #answers-header"),t=e.find(".answers-subheader h2"),n=parseInt(t.text())+z.length;isNaN(n)&&(n=z.length),t.text(function(e){return 1==e.answerCount?e.answerCount+" Answer":e.answerCount+" Answers"}({"answerCount":n})),$.ajax({"url":"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({"postIdsSemiColonDelimited":z.join(";")})}).done(function(t){var n=$('<div class="dno" />').append(t);n.insertAfter(e).fadeIn(400,function(){n.removeClass("dno"),styleCode(),StackExchange.vote.init($(".question").data("questionid")),n.find(".answer").each(function(){StackExchange.comments.init({"post":$(this)})})})}),StackExchange.question.bindSuggestedEditPopupLinks(),O(),z=[]}function P(e,t,n){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(e.body)||(e.fetch&&$.ajax({"url":"/posts/"+e.id+"/"+n}).done(function(t){e.body=t,H[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid}}),H[e.id]={"id":e.id,"body":e.body,"index":(new Date).getTime(),"siteid":e.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(at),$(".tag-sponsorship").length>0&&$("#question-mini-list, #questions").css("margin-top","0px"),t&&B())}function N(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function B(){var e=[];for(var t in H)H.hasOwnProperty(t)&&e.push(H[t]);for(var n=e.sort(N),r=0;r<n.length;r++){var i=n[r];$("#question-summary-"+i.id).remove(),$(i.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}M(0),null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,j),styleCode(),O(),$(".new-post-activity").remove(),H={}}function M(e){var t=document.title.replace(/^\(\d*\*?\) /,"");e>0&&(t="("+e+") "+t),window.setTimeout(function(){$(document).attr("title",t)},200)}function F(){X=!0,StackExchange.notify.show('Instant updates have been disabled due to inactivity <a href=".">refresh</a> to reconnect',312),U.dispose()}function O(){for(var e=$("span.relativetime, span.relativetime-clean"),t=0;t<e.length;t++)if(e[t].title){var n=I(e[t].title);n&&(e[t].innerHTML=n)}}function I(e){if(null!=e&&20==e.length){e=e.substr(0,10)+"T"+e.substr(11,10);var t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3+StackExchange.options.serverTimeOffsetSec,r=Math.floor(n/86400);if(!(isNaN(r)||0>r||r>=31))return 0==r&&(2>n&&"just now"||60>n&&(Z?function(e){return 1==e.seconds,e.seconds+"s ago"}({"seconds":Math.floor(n)}):function(e){return 1==e.seconds?e.seconds+" sec ago":e.seconds+" secs ago"}({"seconds":Math.floor(n)}))||120>n&&(Z?"1m ago":"1 min ago")||3600>n&&(Z?function(e){return 1==e.minutes,e.minutes+"m ago"}({"minutes":Math.floor(n/60)}):function(e){return 1==e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({"minutes":Math.floor(n/60)}))||7200>n&&(Z?"1h ago":"1 hour ago")||86400>n&&(Z?function(e){return 1==e.hours,e.hours+"h ago"}({"hours":Math.floor(n/3600)}):function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":Math.floor(n/3600)})))}}var j,R,U=null,H={},z=[],V=0,G=[],W=10,J=!1,Z=!1,X=!1,Q=!1,Y=!1,K=!1,et=new EventEmitter,tt=null,nt=null,rt=function(){var e=Object.keys(z).length;0==e&&$("#new-answer-activity").remove();var t=$('<div id="new-answer-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" new answer to this question":e.count+" new answers to this question"}({"count":e})));return t.click(function(){StackExchange.realtime.expandAnswers()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandAnswers(),!1}),t},it=function(e,t){return function(n){var r=$(n).filter(".question, .answer"),i=r.find(".postcell, .answercell"),a=e.closest(".question"),s=a.length>0,o=$("h1 a.question-hyperlink"),u=r.data("title"),c=s&&$.trim(o.text())!=u,l=$(".question-status"),p=150,d=function(e,t){return function(){return $.Deferred(function(n){null==t||t()?e.animate({"opacity":0},p).promise().done(function(){n.resolve()}):n.resolve()})}},h=d(o,function(){return c}),f=d(e),g=d(l);if($.when(h(),f(),g()).done(function(){c&&o.text(u).animate({"opacity":1},p);var t=function(e,t){return new $.Deferred(function(n){t.css({"opacity":0}),e.replaceWith(t),t.animate({"opacity":1},p,function(){n.resolve()})})};t(e,i).done(function(){styleCode(),StackExchange.question.bindSuggestedEditPopupLinks()});var r=$(n).find(".question-status:last");r.length?(l.length||(l=$("<div>").addClass("question-status").insertAfter(a)),t(l,r)):s?l.remove():l.animate({"opacity":1},p)}),window.history){var m=c?function(e){return e.pageTitle+" - "+e.siteName}({"pageTitle":u,"siteName":StackExchange.options.site.name}):document.Title;window.history.replaceState(window.history.state,m,"#"+t.id)}}},at=function(){var e=Object.keys(H).length;M(e);var t=$('<div class="new-post-activity">').append($('<a href="#">').text(function(e){return 1==e.count?e.count+" question with new activity":e.count+" questions with new activity"}({"count":e})));return t.click(function(){StackExchange.realtime.expandActiveQuestions()}),t.find("a").click(function(e){return e.stopPropagation(),StackExchange.realtime.expandActiveQuestions(),!1}),t};return{"init":a,"log":o,"expandActiveQuestions":B,"expandAnswers":T,"subscribeToActiveQuestions":b,"subscribeToQuestion":f,"unsubscribeToQuestion":h,"pauseQuestionNotifications":!1,"subscribeToReputationNotifications":E,"subscribeToSuggestedEdits":y,"updateRelativeDates":O,"subscribeToReviewDashboard":w,"subscribeToTopBarNotifications":x,"subscribeToCounts":k,"genericSubscribe":p,"genericUnsubscribe":l}}(),StackExchange.anonymous={},!function(e,t,n){"function"==typeof define?define(n):"undefined"!=typeof module?module.exports=n():t[e]=n(t)}("klass",this,function(e){function t(e){return a.call(n(e)?e:function(){},e,1)}function n(e){return typeof e===o}function r(e,t,n){return function(){var r=this.supr;this.supr=n[c][e];var i={}.fabricatedUndefined,a=i;try{a=t.apply(this,arguments)}finally{this.supr=r}return a}}function i(e,t,i){for(var a in t)t.hasOwnProperty(a)&&(e[a]=n(t[a])&&n(i[c][a])&&u.test(t[a])?r(a,t[a],i):t[a])}function a(e,t){function r(){}function s(){this.initialize?this.initialize.apply(this,arguments):(t||l&&o.apply(this,arguments),p.apply(this,arguments))}r[c]=this[c];var o=this,u=new r,l=n(e),p=l?e:this,d=l?{}:e;return s.methods=function(e){return i(u,e,o),s[c]=u,this},s.methods.call(s,d).prototype.constructor=s,s.extend=a,s[c].implement=s.statics=function(e,t){return e="string"==typeof e?function(){var n={};return n[e]=t,n}():e,i(this,e,o),this},s}e=e||this;var s=e.klass,o="function",u=/.*/,c="prototype";return t.noConflict=function(){return e.klass=s,this},t}),StackExchange.topbar=function(){function e(e,t){var n=e.data("cookie");if(n){var r=t($.cookie(n));r&&$.cookie(n,r,{"expires":new Date(e.data("end-date")+864e5),"path":"/"})}}function t(e){StackExchange.options.enableLogging&&console.log("topbar: "+e)}function n(e){for(var t=0;t<A.length;t++){var n=A[t].$button;if(n&&n[0]==e)return!0}return!1}function r(){for(var e=0;e<A.length;e++)A[e].toggle(!1)}function i(e){var n;if(e&&(n=JSON.parse(e))){t("realtime message - "+e);for(var r in n)for(var i=0;i<A.length;i++)if(r==A[i].name){A[i].handleRealtimeMessage(n[r]);break}}}function a(){var e=$(".js-top-bar"),t=$(".js-search-field"),n=$(".js-search-submit"),r=!1;t.on({"focus":function(){e.addClass("_search-open")},"blur":function(){r?(t.focus(),r=!1):e.removeClass("_search-open")},"keydown":function(e){27==e.keyCode&&t.blur()}}),n.mousedown(function(){r=!0}),$("#search-channel-selector").change(function(){var e=$(this).find("option:selected");if(e&&1==e.length){var t=e.data("url");t&&$("#search").attr("action",t);var n=e.data("mixed");void 0===n?$("#search-channel-mixed").attr("disabled","disabled"):$("#search-channel-mixed").removeAttr("disabled").val(n)}})}function s(e){function t(){var t=$(window).scrollTop();t>e?n.addClass("_scrolling"):n.removeClass("_scrolling")}var n=$(".js-top-bar");t(),$(window).scroll(function(){t()})}var o=klass({"name":"","url":"","cssClass":"","button":null,"$dialog":null,"$loadingPlaceholder":null,"$preloadedDialog":null,"alignment":null,"hasRead":!1}).statics({"$corral":$(".js-topbar-dialog-corral")}).methods({"isLoading":function(){return null!=this.$loadingPlaceholder},"isLoaded":function(){return null!=this.$dialog},"isVisible":function(){var e=this.$dialog||this.$loadingPlaceholder;return null!=e&&e.is(":visible")},"toggle":function(e,t){if("boolean"!=typeof e)throw new Error("showOrHide is a required parameter");if(!e){if(this.isLoading())return this.showOrHide(!1),void 0;if(!this.isLoaded())return}if(this.isLoaded()||this.isLoading()?(e||t||!this.hasRead||this.markAsRead(),this.showOrHide(e)):this.$preloadedDialog?this.loadChildContent():this.loadDialog(),e)for(var n=0;n<A.length;n++)this.button!=A[n]&&A[n].toggle(!1,t)},"showOrHide":function(e){var t=this.$dialog||this.$loadingPlaceholder;t&&t.toggle(e),e&&this.$dialog&&(this.hasRead=!0)},"loadChildContent":function(){var e=this.$preloadedDialog.find(".child-content");if(this.$dialog=this.$preloadedDialog,this.positionDialogUnderButton(),this.showOrHide(!0),this.url){$("<div>",{"class":"child-content-loading"}).addSpinner().appendTo(e);var t=this;this.fetchUrl().done(function(n){e.html(n),t.afterLoad()})}},"loadDialog":function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(o.$corral),this.positionDialogUnderButton(),this.showOrHide(!0);var e=this;this.fetchUrl().done(function(t){e.$dialog=$(t).appendTo(o.$corral),e.afterLoad();var n=e.$loadingPlaceholder.is(":visible");e.positionDialogUnderButton(),e.showOrHide(n)}).always(function(){e.$loadingPlaceholder.remove(),e.$loadingPlaceholder=null})}},"afterLoad":function(){this.$dialog.find(".js-close-button").click(function(){StackExchange.topbar.hideAll()}),StackExchange.gps.bindTrackClicks(this.$dialog)},"getLoadingPlaceholder":function(){var e=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html(),t=this.cssClass+(StackExchange.options.user.isAnonymousNetworkWide?" anon":""),n=['<div class="topbar-dialog ',t,' dno">','<div class="header">',e,"</div>",'<div class="modal-content"/>',"</div>"];return $(n.join(""))},"positionDialogUnderButton":function(){for(var e=this.alignment||(StackExchange.options.user.canSeeNewHeaderDesign?"right":"left"),t=this.button.$button.outerHeight(),n=this.$dialog||this.$loadingPlaceholder,r=n.parent();r.not("body").length&&"static"===r.css("position");)r=r.parent();r=r.length?r:$("body");var i=this.button.$button.offset().left-r.offset().left;"right"===e&&(i=r.outerWidth()-i-this.button.$button.outerWidth());var a={"top":t};a[e]=i,(this.$dialog||this.$loadingPlaceholder).css(a)},"fetchUrl":function(){t("fetching "+this.url);var e=$.ajax({"type":"GET","url":this.url,"dataType":"html"});return e},"markAsRead":function(){this.button.markAsRead(),this.isLoaded()&&this.$dialog.find(".unread-item").removeClass("unread-item")},"handleRealtimeMessage":function(){this.clearLoadedDialog()},"clearLoadedDialog":function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),u=klass({"name":"","selector":"","dialog":null,"$button":null,"onClass":"","unreadCountPrefix":"","queuedUnreadCount":0,"showsOnMouseOver":!1}).methods({"initialize":function(){this.dialog.name=name,this.dialog.button=this,S.push(this.dialog);var e=this;this.$button=$(this.selector),this.$button.click(function(){return e.toggle(),!1}),this.showsOnMouseOver&&this.$button.mouseover(function(){e.showOnMouseOver()}),this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},"toggle":function(e,t){e="boolean"==typeof e?e:!this.$button.hasClass(this.onClass),this.$button.toggleClass(this.onClass,e),this.dialog.toggle(e,t)},"showOnMouseOver":function(){for(var e=!1,t=0;t<A.length;t++){var n=A[t];if(n!=this&&n.showsOnMouseOver&&n.isOn()){e=!0;break}}e&&this.toggle(!0,!0)},"isOn":function(){return this.$button.hasClass(this.onClass)},"markAsRead":function(){this.$button.find(".unread-count,.js-unread-count").fadeOut();var e=this.$button.data("unread-class");e&&this.$button.removeClass(e),this.dequeuePendingUnreadCount()},"dequeuePendingUnreadCount":function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},"setUnreadCount":function(e,t){var n=t!==!1;if(void 0===e);else if(0>=e)this.queuedUnreadCount=0,this.isOn()||this.markAsRead();else if(e>0)if(this.isOn())this.queuedUnreadCount=e;else{var r=this.$button.find(".unread-count,.js-unread-count");r.text(this.unreadCountPrefix+e).fadeIn(),n&&this.addUnreadClass(),this.dialog.clearLoadedDialog()}},"addUnreadClass":function(){var e=this.$button.data("unread-class");e&&this.$button.addClass(e)},"handleRealtimeMessage":function(){}}),c=o.extend({"url":"/topbar/site-switcher/site-list","cssClass":"siteSwitcher-dialog","$searchItems":null,"$pinnedSiteSearchItems":null,"isPreloaded":!0,"$preloadedDialog":o.$corral.find(".siteSwitcher-dialog")}).methods({"afterLoad":function(){this.$dialog.find("#js-site-filter-txt").typeWatch({"highlight":!1,"wait":250,"captureLength":-1,"callback":$.proxy(this.filterSites,this)}),this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{"title":$(".site-icon",this).attr("title").toLowerCase(),"description":$(".site-desc",this).text().toLowerCase(),"hostname":$("a",this).first().attr("href"),"li":this}});var e=this.$dialog;this.$dialog.find("#js-site-filter-txt").focus(function(){var t=e.offset().top+e.height(),n=e.find(".other-sites li:nth-child(2)"),r=n.offset().top+n.height();r>t&&e.animate({"scrollTop":e.scrollTop()+r-t},750)}),StackExchange.options.user.isAnonymous&&!StackExchange.options.user.isAnonymousOnThisSite||!$(".pinned-site-editor-container").length||($(".js-found-sites").css({"width":$("#js-site-search-txt").outerWidth()}),$(".js-found-sites").hide(),this.$dialog.find("#js-site-search-txt").typeWatch({"highlight":!1,"wait":100,"captureLength":-1,"callback":$.proxy(this.findSitesToPin,this)}),this.$dialog.find("#edit-pinned-sites").click($.proxy(this.editPinnedSites,this)),this.$dialog.find("#cancel-pinned-sites").click({"forceListRefresh":$("#save-pinned-sites-btn").is(":enabled")},this.cancelSiteListEdits),this.$dialog.find("#pin-site-btn").click($.proxy(this.pinSite,this)),this.$dialog.on("click",".remove-pinned-site-link",function(){return $(this).parent().remove(),$("#save-pinned-sites-btn").enable(),$("#reset-pinned-sites").show(),!1}),this.$dialog.find("#save-pinned-sites-btn").click($.proxy(this.savePinnedSites,this)),this.$dialog.find("#reset-pinned-sites").click($.proxy(this.resetPinnedSites,this))),this.supr()},"showOrHide":function(e){this.supr(e)},"pinSite":function(){$("#pin-site-btn").disable();var e=$("#js-site-search-txt").val(),t=$.grep(this.$pinnedSiteSearchItems,function(t){return t.sitename===e});if(!t.length)return $("#pin-site-btn").enable(),void 0;var n=t[0],r=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();if(r.indexOf(n.siteid)>-1)return $("#pin-site-btn").enable(),void 0;var i=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/pin-site","data":{"siteId":n.siteid},"dataType":"html"}).done(function(e){var t=$(e);t.hide(),$(".pinned-site-list").append(t),t.fadeIn("slow"),$("#js-site-search-txt").val(""),$("#save-pinned-sites-btn").enable(),i.toggleSiteListResetLink(!0)}).fail(function(){$("#pin-site-btn").parent().showErrorMessage("Something bad happened; please try again"),$("#pin-site-btn").enable()})},"savePinnedSites":function(){var e=$(".pinned-site-list li .pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray(),t=!$("#reset-pinned-sites").is(":visible")||!e.length;return this.toggleSiteListResetLink(!t),$.ajax({"type":"POST","url":"/topbar/site-switcher/save-pinned-sites","data":{"siteIds":t?[]:e,"fkey":StackExchange.options.user.fkey},"dataType":"html","traditional":!0}).done($.proxy(function(e){$(".my-sites").html(e),this.cancelSiteListEdits(!1),$(".pinned-site-list").data("custom-list",!t),StackExchange.using("gps",function(){StackExchange.gps.track("site_switcher.edit",{})})},this)).fail(function(){$("#save-pinned-sites-btn").parent().showErrorMessage("Something bad happened; please try again")}),!1},"resetPinnedSites":function(){var e=this;return $.ajax({"type":"GET","url":"/topbar/site-switcher/default-active-sites","dataType":"html"}).done(function(t){$(".pinned-site-list").html(t),$("#save-pinned-sites-btn").enable(),e.toggleSiteListResetLink(!1)}).error(function(){$("#reset-pinned-sites").parent().showErrorMessage("Something bad happened; please try again")}),!1},"doSearch":function(e,t,n){var r;t=t.toLowerCase();var i=[];return $.each(e,function(e,n){var r={"index":e,"li":n.li,"item":n},a=n.title.indexOf(t);n.title==t?r.priority=1:0==a?r.priority=2:a>-1?r.priority=3:n.description.indexOf(t)>-1?r.priority=4:n.hostname.indexOf(t)>-1&&(r.priority=5),r.priority&&i.push(r)}),r=i.sort(function(e,t){return e.priority-t.priority||e.index-t.index}),n&&StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{"term":t,"numresults":i.length},!1)
}),r},"_findSitesToPin":function(e){var t=$(".js-found-sites"),n=this.$pinnedSiteSearchItems;if(t.empty(),""===e)return t.hide(),$("#pin-site-btn").disable(),void 0;if(n=this.doSearch(n,e,!1),n.length){t.show(),$("#pin-site-btn").enable();var r=$(".pinned-site-link").map(function(e,t){return $(t).data("id")}).toArray();$.each(n,function(e,n){var i=$('<li class="pinned-site-candidate">'+n.item.sitename+"</li>");r.indexOf(n.item.siteid)>-1?i.addClass("already-pinned-site"):i.click(function(){var e=$(this).text();return $("#js-site-search-txt").val(e),$(".js-found-sites").hide(),!1}),i.appendTo(t)})}},"findSitesToPin":function(e){if(this.$pinnedSiteSearchItems)return this._findSitesToPin(e),void 0;var t=this;$.ajax({"type":"GET","url":"/topbar/site-switcher/all-pinnable-sites","dataType":"json"}).done(function(n){t.$pinnedSiteSearchItems=n,t._findSitesToPin(e)})},"filterSites":function(e){var t=$(".js-other-sites"),n=this.$searchItems;t.empty(),""!=e&&(n=this.doSearch(n,e,!0)),t.append(n.map(function(e){return this&&this.li||e.li}))},"editPinnedSites":function(){$(".siteSwitcher-dialog .header").not("#your-communities-header").css("opacity",.2),$(".siteSwitcher-dialog .modal-content").not("#your-communities-section").css("opacity",.2),$(".my-sites").hide(),$(".pinned-site-editor-container").show(),$("#edit-pinned-sites").hide(),$("#cancel-pinned-sites").show();var e=$(".pinned-site-list");if(""===e.html().trim()){var t=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html();e.append('<li style="text-align:center;">'+t+"</li>"),$.ajax({"type":"GET","url":"/topbar/site-switcher/current-pinned-sites","dataType":"html"}).done(function(t){e.html(t)}).fail(function(){e.showErrorMessage("Something bad happened; please try again")}).always(function(){e.find(".ajax-loader").remove()})}this.toggleSiteListResetLink("true"===e.data("custom-list").toString().toLowerCase());var n=$(".sortable"),r=this;return n.data("isSortable")||StackExchange.loadJqueryUi().done(function(){n.sortable({"axis":"y","update":function(){$("#save-pinned-sites-btn").enable(),r.toggleSiteListResetLink(!0)}}).disableSelection().data("isSortable",!0)}),!1},"toggleSiteListResetLink":function(e){$("#reset-pinned-sites").toggle(e)},"cancelSiteListEdits":function(e){return $(".header").not("#your-communities-header").css("opacity",1),$(".modal-content").not("#your-communities-section").css("opacity",1),$(".my-sites").show(),$("#edit-pinned-sites").show(),$(".pinned-site-editor-container").hide(),$("#cancel-pinned-sites").hide(),$("#save-pinned-sites-btn").disable(),e&&($(".pinned-site-list").empty(),$(".js-found-sites").hide(),$("#js-site-search-txt").val(""),$("#pin-site-btn").disable()),!1}}),l=u.extend({"name":"SiteSwitcher","selector":".js-site-switcher-button","dialog":new c,"showsOnMouseOver":!StackExchange.options.user.canSeeNewHeaderDesign,"onClass":"icon-site-switcher-on"}),p=o.extend({"cssClass":"feature-notice-dialog","alignment":"left"}).methods({"loadDialog":function(){this.$dialog=$(".js-feature-notice-dialog").appendTo(o.$corral);var e=this.button,t=e.$button;this.$dialog.find(".js-close-button").click(function(){return e.mark(4),t.hide(),e.toggle(!1),!1}),this.$dialog.find(".js-cta-button").click(function(){return e.didClickCTA=!0,e.mark(2),!0}),this.positionDialogUnderButton(),this.showOrHide(!0)}}),d=u.extend({"name":"FeatureNotice","selector":".-feature-notice","dialog":new p}).methods({"initialize":function(){u.prototype.initialize.apply(this,arguments);var t=this.$button;e(t,function(e){return e?"!"==e.substring(0,1)?"!"+(1+parseInt(e.substring(1))):null:"!1"}),t.data("autopopup")&&this.toggle(!0,!1,!0)},"mark":function(t){e(this.$button,function(e){if(e){var n=e.split(";");if(2==n.length&&!isNaN(n[0])&&!isNaN(n[1]))return(n[0]|t)+";"+n[1]}return t+";"+Date.now()})},"markAsRead":function(){this.didClickCTA&&u.prototype.markAsRead.apply(this,arguments)},"toggle":function(e,t,n){e="boolean"==typeof e?e:!this.$button.hasClass(this.onClass),n=!!n,u.prototype.toggle.apply(this,arguments);{var r=this.$button;this.dialog.$dialog}e&&(this.mark(1),n||this.mark(8),r.hasClass("js-sample")&&StackExchange.using("gps",function(){StackExchange.gps.track("new_feature.show",{"campaign":r.data("campaign"),"location":r.data("location"),"auto_popup":n})}))}}),h=o.extend({"url":"/topbar/inbox","cssClass":"inbox-dialog"}),f=u.extend({"name":"Inbox","selector":".js-inbox-button","dialog":new h,"showsOnMouseOver":!StackExchange.options.user.canSeeNewHeaderDesign}).methods({"handleRealtimeMessage":function(e){this.setUnreadCount(e.UnreadInboxCount)}}),g=o.extend({"url":"/topbar/achievements","cssClass":"achievements-dialog"}).methods({"afterLoad":function(){this.alignRep(),this.bindDateGroupToggles(),this.displayUtcTime(),this.bindGpsTracker(),this.supr()},"alignRep":function(){var e=this.$dialog.find(".js-items .js-faux-column"),t=0;e.filter(".js-rep-change").each(function(){var e=$.trim($(this).text()).length;e>t&&(t=e)}),t>0&&e.width(6*(t+1))},"bindDateGroupToggles":function(){this.$dialog.find(".js-date-group-toggle").click(function(){var e=$(this),t=e.closest(".js-date-group"),n=t.find(".js-items"),r=t.find(".rep-site-container");e.find(".date-group-toggle").toggleClass("toggle-hidden"),n.add(r).fadeToggle("fast")}),this.$dialog.find(".rep-site-container").on("click",function(e){e.stopImmediatePropagation()})},"displayUtcTime":function(){var e=this.$dialog,t=function(){var t=new Date;t.setTime(t.getTime()+1e3*StackExchange.options.serverTimeOffsetSec);var n=t.getUTCHours(),r=t.getUTCMinutes();10>n&&(n="0"+n),10>r&&(r="0"+r),e.find(".js-utc-time").text(n+":"+r)};t(),setInterval(t,6e4)},"bindGpsTracker":function(){var e=$("#js-gps-container.js-empty-achiev");e.find("a:first").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:6 })"),e.find("a:last").addClass("js-gps-track").data("gps-track","achievements_popup.click({ item_type:7 })"),StackExchange.gps.bindTrackClicks(e)}}),m=u.extend({"name":"Achievements","selector":".js-achievements-button","dialog":new g,"unreadCountPrefix":"+","showsOnMouseOver":!StackExchange.options.user.canSeeNewHeaderDesign}).methods({"handleRealtimeMessage":function(e){var t=e.UnreadNonRepCount>0,n=0===(e.UnreadRepCount||0),r=n&&t;r?this.addUnreadClass():this.setUnreadCount(e.UnreadRepCount,t)}}),v=o.extend({"cssClass":"help-dialog"}).methods({"loadDialog":function(){this.$dialog=$(".js-help-dialog").appendTo(o.$corral),this.positionDialogUnderButton(),this.showOrHide(!0)}}),b=u.extend({"name":"Help","selector":".js-help-button","dialog":new v}),k=o.extend({"cssClass":"network-logo-dialog","alignment":"left"}).methods({"loadDialog":function(){this.$dialog=$(".js-network-logo-dialog").appendTo(o.$corral),this.positionDialogUnderButton(),this.showOrHide(!0);var e=this.button;this.$dialog.find(".js-close-button").click(function(){return e.toggle(!1),!1})}}),w=u.extend({"name":"NetworkLogo","selector":".js-network-logo","dialog":new k}),x=o.extend({"url":"/topbar/review","cssClass":"review-dialog"}),E=u.extend({"name":"Review","selector":".js-review-button","dialog":new x}),y=o.extend({"url":"/topbar/mod-inbox","cssClass":"modInbox-dialog"}).methods({}),C=u.extend({"name":"ModInbox","selector":".js-mod-inbox-button","dialog":new y}),A=[],S=[];return{"init":function(){if(window.devicePixelRatio>=1.5&&$(".js-avatar-me").attr("src",function(e,t){return t.replace("?s=24","?s=48")}),A.push(new l),A.push(new w),StackExchange.settings.topBar&&StackExchange.settings.topBar.showNewFeatureNotice&&A.push(new d),A.push(new f),A.push(new m),A.push(new b),A.push(new E),StackExchange.options.user.isModerator&&A.push(new C),$(document).click(function(e){n(e.target)||$.contains(o.$corral[0],e.target)||r()}),StackExchange.options.user.canSeeNewHeaderDesign){var e=document.body.style;"justifyContent"in e||"WebkitJustifyContent"in e||$(".top-bar *:visible").css({"display":"inline-block","white-space":"nowrap","vertical-align":"middle"}).not(".-logo, .-logo *, svg, .-badges *").css("width","auto"),a(),s(70)}},"hideAll":r,"handleRealtimeMessage":i}}(),StackExchange.notify=function(){function e(e,t){var n=$("#dismissed-messages");n.val(n.val()+"~"+e+(t?" "+t:"")+"~")}function t(e,t){var n=$("#dismissed-messages").val();return n?new RegExp("~"+e+(t?" "+t:"")+"~").test(n):!1}function n(e,t,n){var r=parseInt($("body").css("margin-top").match(/\d+/)),i=t*r/e;n?$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").animate({"marginTop":i+"px"},"fast","linear"):$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").css("marginTop",i+"px")}var r=0,i=-1,a="m",s=function(t,a){var s=$("#notify-"+t+(a?"-"+a:""));s.length&&(t==i?u():t>i&&$.post("/messages/mark-as-read",{"messagetypeid":t,"id":a?a:null}),e(t,a),r--,s.fadeOut("fast",function(){n(r+1,r,!0),s.remove(),0===$("#notify-container div").length&&$("#notify-container").hide()}))},o=function(e){if(r++,t(e.messageTypeId,e.id))return!1;var n="";e.messageTypeId&&(n=' id="notify-'+e.messageTypeId+(e.id?"-"+e.id:"")+'"');var i="<div"+n+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+e.text+"</span>";if(e.showProfile){var a=encodeURIComponent("/users/"+e.userId+"?tab=badges&sort=recent");i+=" "+function(e){return'See your <a href="'+e.url+'">profile</a>.'}({"url":"/messages/mark-as-read?messagetypeid="+e.messageTypeId+"&returnurl="+a})}i+="</div>";var o=$(i);return e.cssClass&&o.addClass(e.cssClass),o.find(".notify-close").click(function(){e.close&&e.close(),s(e.messageTypeId,e.id)}),$("#notify-container").append(o),$("#notify-container").show(),!0},u=function(e){$.cookie(a,e?e:"0",{"expires":90,"path":"/"})},c=function(){$("#notify-container div").fadeIn("slow")},l=function(){$("body:not(.no-message-slide), body:not(.no-message-slide) .js-top-bar").animate({"marginTop":"2.5em"},"fast","linear")},p=function(e,t){var n=$('<div class="link-more">').append($("<a>").text(function(e){return 1==e.numNotifications?"view "+e.numNotifications+" more notification":"view "+e.numNotifications+" more notifications"}({"numNotifications":e})));$("#notify-container").append(n),n.click(function(){n.detach();for(var e=0;e<t.length;e++)o(t[e]);c()})};return{"showMessages":function(e,t){for(var i=0,a=r,s=t?2:e.length,u=0;s>u&&u<e.length;u++)o(e[u])&&i++;if(n(a,i,!1),c(),t&&i<e.length){var l=e.slice(s);p(e.length-i,l)}},"show":function(e,t,n){l(),o({"text":e,"messageTypeId":t,"cssClass":n}),c()},"close":s,"getMessageText":function(e){return $("#notify-"+e+" .notify-text").text()}}}();var styleCode=function(){function e(e){var t=$("#prettify-lang").text();return""!=t?(e.addClass(t),!0):!1}return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),StackExchange.ifUsing("snippets",function(){StackExchange.snippets.redraw&&StackExchange.snippets.redraw()});var t=!1;if($("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),t=!0),$(this).hasClass("prettyprint")||e($(this))&&($(this).addClass("prettyprint"),t=!0)}),t){if("undefined"!=typeof jtab)return jtab.renderimplicit(),void 0;StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}$(".spoiler").click(function(){$(this).toggleClass("spoiler")})}}();styleCode.updateLangdivDelayed=StackExchange.helpers.DelayedReaction(function(e){var t=$("#prettify-lang");t.length&&$.get("/api/tags/langdiv",{"tags":e.join(" ")}).done(function(e){e?t.replaceWith(e):t.empty(),StackExchange.MarkdownEditor.refreshAllPreviews(),styleCode()})},1500,{"sliding":!0}),StackExchange.helpers.MagicPopup=function(e){function t(t,r){if($.contains(document.documentElement,t)&&(!e.predicate||e.predicate(t))){var a=$("<div id='"+e.id+"'/>").html(r),s=$("<div />").css({"overflow":"hidden","position":"absolute","z-index":1002,"width":1,"height":1,"top":0,"left":0}).append(a).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(a.attr("id"));var o=e.showing(t,a),u={"left":o.left};o.hasOwnProperty("bottom")?(u.bottom=o.bottom,u.top="auto"):u.top=0|o.top;var c;e.shown&&(c=function(){e.shown(t,a)}),s.css(u).animate({"height":a.outerHeight()+8,"width":a.outerWidth()+8},300,c),n=function(){s.stop().remove(),e.removed&&e.removed(t,a),i=null,n=null},i=StackExchange.helpers.DelayedReaction(n,5);var l=s;o.additional&&(l=l.add(o.additional)),l.hover(i.cancel,i.trigger)}}var n,r,i,a,s={},o=StackExchange.helpers.DelayedReaction(function(r,i){if(!a&&r){var o;e.cache&&"c_"+r in s?o=$.Deferred().resolve(s["c_"+r]):(o=$.ajax({"type":"GET","url":r,"dataType":"html"}),e.cache&&o.done(function(e){s["c_"+r]=e})),o.done(function(e){n&&n(),""!=e&&t(i,e)})}},500);$(document).delegate(e.selector,{"mouseenter":function(){return i&&this===r?(i.cancel(),void 0):(r=this,o.trigger(e.getUrl(this),this),a=!1,!1)},"mouseleave":function(){a=!0,o.cancel(),i&&i.trigger()}})},StackExchange.tagmenu=function(){function e(e){var t=$(e);if(t.closest(".mixed-site-content").length)return null;var n=t.attr("href"),r=t.data("tag-menu-tagname");if(r&&(r=r.toString()),!(r||n&&"/"==n.charAt(0)))return null;var i=r||t.text();return i.indexOf("*")>-1?null:(t.attr("title",""),"/tags/"+encodeURIComponent(i)+"/subscriber-info")}function t(e,t){var n=$(e),r=n.offset(),i=n.outerHeight(),a={"left":r.left},s=r.top+i,o=r.left+t.outerWidth();t.height()+s>$(window).height()+$(window).scrollTop()?a.bottom=$(window).height()-r.top-8:a.top=s;var u=Math.max(1024,$(window).width());return o>u&&(a.left-=o-u),a}var n,r,i=function(i){n=i,r||(r=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({"selector":".post-tag:not(.user-tag,.no-tag-menu,.invalid-tag,.job-link)","id":"tag-menu","getUrl":e,"showing":t,"shown":function(e,t){n&&n(t,$(e).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))};return{"init":i,"showing":t}}(),StackExchange.usermenu=function(){function e(e,t){var n=$(e),r=n.find("img:last"),o=r.offset(),u=r.height(),c=r.width(),l=Math.max(c,u),p=64*u/l,d=64*c/l,h=t.find("img:first").css({"width":d,"height":p}),f=h.offset();h.css("visibility","hidden"),i=r.clone().css({"position":"absolute","zIndex":1003,"left":o.left,"top":o.top,"width":c,"height":u}).appendTo("body");var g=function(){return h[0].complete?(h.css("visibility","visible"),i.fadeOutAndRemove(),void 0):(setTimeout(g,100),void 0)};i.animate({"width":d,"height":p,"top":o.top+f.top},200,g),t.trigger("userhovershowing",e),a=!0;var m=t.find(".um-header-info a:not(.um-user-link), .um-about-me a, .um-links a").length>0;return StackExchange.gps.track("user_popup.show",{"is_own":s,"has_links":m}),setTimeout(function(){a&&StackExchange.gps.track("user_popup.read",{"is_own":s,"has_links":m})},2e3),t.on("click",".um-gravatar a, a.um-user-link",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":0,"is_own":s})}),t.on("click",".um-header-info a:not(.um-user-link)",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":1,"is_own":s})}),t.on("click",".um-about-me a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":2,"is_own":s})}),t.on("click",".um-links a",function(){StackExchange.gps.track("user_popup.click",{"clicked_link":3,"is_own":s})}),{"top":o.top,"left":o.left-f.left,"additional":i}}function t(e,t){t.trigger("userhovershown")}function n(e){$(e).trigger("userhoverremoved"),i.remove(),a=!1}var r,i,a,s,o=function(){function i(e){var t=$(e),n=t.closest(".user-hover"),r=n.find(".user-details a").attr("href"),i=new RegExp("/users/([^/]+).*$"),a=i.exec(r);return a?(s=StackExchange.options.user.isAnonymous?!1:(0|a[1])>0&&(0|a[1])==(0|StackExchange.options.user.userId),"/users/user-info/"+a[1]):null}r||(r=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({"selector":".user-hover .user-gravatar48, .user-hover .user-gravatar32","predicate":function(e){return!$(e).closest(".mixed-site-content").length},"getUrl":i,"cache":!0,"id":"user-menu","showing":e,"shown":t,"removed":n}))};return{"init":o}}(),StackExchange.chatAd=function(){function e(){var e=$(".question .post-taglist .post-tag");return e.length?e.map(function(e,t){return $(t).text()}).get().join(" "):null}function t(e){return 10>e?"0"+e:e}function n(e){var n=new Date;return n.setTime(1e3*e),[n.getUTCFullYear(),"-",t(n.getUTCMonth()+1),"-",t(n.getUTCDate())," ",t(n.getUTCHours()),":",t(n.getUTCMinutes()),":",t(n.getUTCSeconds()),"Z"].join("")}function r(e){var n=Math.floor((new Date).getTime()/1e3),r=n-e,i=r%60,a=Math.floor(r/60),s=Math.floor(r/3600);if(1>r)return"just now";if(60>r)return function(e){return 1==e.seconds?e.seconds+" sec ago":e.seconds+" secs ago"}({"seconds":i});if(3600>r)return function(e){return 1==e.minutes?e.minutes+" min ago":e.minutes+" mins ago"}({"minutes":a});if(86400>r)return function(e){return 1==e.hours?e.hours+" hour ago":e.hours+" hours ago"}({"hours":s});var o=Math.floor(r/86400);if(1==o)return"yesterday";if(2>=o)return function(e){return 1==e.__count?e.__count+" day ago":e.__count+" days ago"}({"__count":o});var u=new Date(1e3*e);return function(e){return e.month+" "+e.date+" at "+e.hours+":"+e.minutes}({"month":v[u.getMonth()],"date":u.getDate(),"hours":u.getHours(),"minutes":t(u.getMinutes())})}function i(e){var t=$("<div />");return t.text(e),t.html().replace('"',"&quot;")}function a(){h&&$.get(h,null,function(e,t,n){p(e,t,n)})}function s(e){if("!"==e.charAt(0)){var t=e.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(t)){var n=/\?/.test(t)?"&":"?";t+=n+"g&s=32"}return t}return"https://www.gravatar.com/avatar/"+e+"?s=23&d=identicon&r=PG"}function o(e){for(var t=$('<div class="ad502-users" />'),n=0;n<e.length&&7>n;n++){var i=e[n],a=i.name;i.lastPost&&(a+=": "+r(i.lastPost));var o=d+"/users/"+i.id,u=$('<a href="'+o+'" />');$("<img height='23' width='23' />").attr("title",a).attr("src",s(i.emailhash)).appendTo(u),t.append(u)}return t}function u(e){return $('<div class="ad502-users"><img src="'+d+"/rooms/users/"+e+'.jpeg" /></div>')}function c(e){var t=e.user,n=e.userid;return n?'<a href="'+d+"/users/"+n+'">'+i(t)+"</a>":i(t)}function l(){h&&(m>=f&&window.setTimeout(a,1e3*f),f+=g)}function p(e){var t=$("#ad502-rooms");if(e.error)return l(),void 0;t.html("");for(var a=e.rooms,s=0;s<a.length&&2>s;s++){var p=a[s],h=d+"/rooms/"+p.id,f=$('<div class="ad502-room"></div>');f.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+i(p.name)+'"><a href="'+h+'">'+i(p.name)+"</a></span></h3>")),p.messages&&p.messages.length>0&&f.append($('<span title="'+n(p.lastPost)+'" class="ad502-last-message">'+r(p.lastPost)+" - "+c(p.messages[0])+"</span><br>")),p.singleImage?f.append(u(p.id)):f.append(o(p.users)),t.append(f)}e.activeUsers>1?$("#h-chat-link").text(function(e){return 1==e.num,e.num+" People Chatting"}({"num":e.activeUsers})):$("#h-chat-link").text("Visit Chat"),$("#h-chat-link").attr("title",function(e){return 1==e.users&&1==e.rooms?e.users+" user active in "+e.rooms+" room the last 60 minutes":1==e.users?e.users+" user active in "+e.rooms+" rooms the last 60 minutes":1==e.rooms?e.users+" users active in "+e.rooms+" room the last 60 minutes":e.users+" users active in "+e.rooms+" rooms the last 60 minutes"}({"users":e.activeUsers,"rooms":e.activeRooms})),l()}var d,h,f=180,g=30,m=480,v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return/^\/questions\/\d+/i.test(window.location.pathname)&&(m=0),{"init":function(t){if(d=t.chatUrl,h=t.reloadUrl,t.tagBased){var n=e();if(!n)return;h&&(h+=(/\?/.test(h)?"&":"?")+"tags="+encodeURIComponent(n))}null===t.preloadData?a():p(t.preloadData,null,null)}}}(),StackExchange.helpers.noDiacritics=function(){var e={"àåáâäãåąɐᵄᶛ":"a","æǣǽᴂᵆ":"ae","çćčĉ":"c","đƍðÐ":"d","èéêëęǝᴈᵌ":"e","ⅎ":"f","ğĝᵷ":"g","ĥɥʮᶣ":"h","ìíîïıᴉᵎ":"i","ĵ":"j","ʞ":"k","ł":"l","ɯɰᵚᶭᴟ":"m","ñń":"n","òóôõöøő":"o","œɶᴔ":"oe","řɹɺɻʴʵ":"r","śşšŝ":"s","ß":"ss","ʇ":"t","Þ":"th","ùúûüŭů":"u","ʌᶺ":"v","ʍ":"w","ýŸÿʎ":"y","żźž":"z"};return function(t){for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(new RegExp("["+n+"]","g"),e[n]));return t}}(),StackExchange.question=function(){function e(){var e="hashchange.highlightDestination";$(window).off(e).on(e,function(){var e=window.location.href;if(!(e.indexOf("#")<0)){var t=decodeURI(e).match(/#(\d+|comment(\d+)_(\d+))/i);t&&(t[2]?d(t[2],t[3]):p(t[1]))}}).trigger(e)}var t,n,r,i=function(e,t){return e?function(e){return"share link to this question on "+e.socialNetwork}({"socialNetwork":t}):function(e){return"share link to this answer on "+e.socialNetwork}({"socialNetwork":t})},a=function(e,t,n,r,a,s){return $("<a>",{"id":"share-"+r+"-"+e,"class":"share-"+r,"title":i(t,n),"text":a,"data-svc":s})},s=function(e){var t=null!=e;e||(e=$("div.question div.post-menu a.short-link"));var n=e.closest(".post-menu, .help-menu");if(e.hasClass("share-link"))n.find(".close-share-tip").click();else{e.addClass("share-link");var r=e.attr("id").substring("link-post-".length),i=e.closest(".col-section").length?"section":e.closest("div.question").length?"question":"answer",s=e.closest("div.question").length,o=StackExchange.options.site.protocol||"http",u=o+"://"+document.location.host+e.attr("href"),c=("answer"==i?"Answer:":"")+$("#question-header a.question-hyperlink").text(),l=StackExchange.options.user&&StackExchange.options.user.userId&&StackExchange.options.user.userId>0,p='<div class="share-tip" style="display:none">'+(s?l?"share a link to this question (includes your user id)":"share a link to this question":l?"share a link to this answer (includes your user id)":"share a link to this answer")+'<input type="text" style="display:block; width:292px;" value="'+u+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(p+=$("<div>",{"id":"share-icons"}).append(a(r,s,"Google+","gp","share [g+]",1)).append(a(r,s,"Facebook","fb","share [fb]",2)).append(a(r,s,"Twitter","tw","share [tw]",3)).prop("outerHTML")),StackExchange.gps.track("share.show",{"location":s?1:2}),p+='<a class="close-share-tip" style="float:right">close</a></div>';var d=$(p);if(StackExchange.options.site.enableSocialMediaInSharePopup){var h="2";StackExchange.share.gplus($("#share-gp-"+r,d),u,c,h),StackExchange.share.facebook($("#share-fb-"+r,d),u,c,h),StackExchange.share.twitter($("#share-tw-"+r,d),u,c,h),$("#share-icons a",d).click(function(){d.fadeOutAndRemove(),StackExchange.gps.track("share.click",{"location":s?1:2,"service":$(this).data("svc")})})}d.appendTo(n).fadeIn(t?"fast":0).bind("removing",function(){e.removeClass("share-link")}).find(".close-share-tip").click(function(){d.fadeOutAndRemove()}).end().find("input[type=text]").select()}},o=function(e){var t=$("#post-form h2:first"),n=t.wrap("<div />").parent(),r=n.wrap("<div />").parent(),i=$("<div />").prependTo(r),a=r.height(),s=$("<div />"),o=$(e),u=parseInt(t.css("margin-bottom")),c=$("#content"),l=$("#wmd-input").outerWidth(),p=1e3,d=c.offset().left>t.offset().left-5&&"visible"!=c.css("overflow-x");s.css({"height":0,"overflowY":"hidden"}).appendTo(n).append(o),r.css({"height":a,"position":"relative"}),n.css({"position":"absolute","bottom":-u,"width":l}),i.addClass("answer-help-background").css({"position":"absolute","bottom":-u,"height":0,"width":l}),d&&(i.css("left",0),n.animate({"paddingLeft":5},p)),s.animate({"height":o.height()+u+10},p),i.animate({"height":o.height()+u+10+a},p),$("<div style='float:right;margin-top:20px;'><a href='#'>ok</a></div>").hide().prependTo(n).fadeIn(1e3).find("a").one("click",function(e){var r=$(this).parent();setTimeout(function(){r.remove()},1),s.animate({"height":0},p,function(){s.add(i).remove(),t.unwrap().unwrap(),t.text("Your Answer")}),i.animate({"height":0},p),d&&n.animate({"paddingLeft":0},p),e.preventDefault()})},u=function(){$.get("/posts/answer-help").then(o)},c=function(){$.get("/posts/answer-ban-warning").then(o).then(function(){var e=$("#post-form h2:first");e.text("WAIT!"),$("#qualityBanWarningShown").val("true")})},l=function(e){var t=e?e.closest(".question"):$(".question"),n=t.data("questionid");if(!n)throw new Error("getQuestionId could not find an id");return n},p=function(e){h($(".answer[data-answerid="+e+"]"))},d=function(e,t){var n="#comment-"+e,r=$(n);if(r.length)StackExchange.comments.flashHighlight(r),r[0].scrollIntoView(!0);else{var i=$("#comments-link-"+t);i.length&&StackExchange.comments.loadAll(i).done(function(){StackExchange.comments.flashHighlight(e),$(n)[0].scrollIntoView(!0)})}},h=function(e){var n=r;e.css({"backgroundColor":t}).animate({"backgroundColor":n},2e3,"linear",function(){$(this).css("background-color","")})},f=function(e){e=e||{},$(document).on("click",".post-menu a.short-link",function(t){return t.ctrlKey||t.metaKey?void 0:(s($(this),e.showCitation),!1)}).on("click",".bottom-share-links a",function(){var e=$(this).attr("href"),t=null;e&&e.length&&(e.indexOf("%3fsgp%3d")>=0?t=1:e.indexOf("%3fsfb%3d")>=0?t=2:e.indexOf("%3fstw%3d")>=0?t=3:e.indexOf("%3fsem%3d")>=0&&(t=4)),t&&StackExchange.gps.track("share.click",{"location":3,"service":t},!0)});var t=$(".bottom-notice");t&&t.length&&!t.data("bn")&&t.data("loc")&&(t.data("bn","bn"),t.on("click","a",function(){var e=0,n=t.data("loc"),r=$(this).attr("href");$(this).hasClass("post-tag")?e=1:/\/ask$/.test(r)?e=2:/\/tags$/.test(r)?e=4:/\/unanswered$/.test(r)?e=5:(/\/questions$/.test(r)||/\/questions[?\/]/.test(r))&&(e=3),StackExchange.gps.track("next_action.click",{"type":e,"location":n},!0)}))},g=function(e,t,n){var r,i,a=document.title,s=n.searchRouteOverride||"/search/titles",o=n.onResults||function(){},u=0;e.attr("autocomplete","off");var c=function(c){var l=e.val();if(!(""==l||l==r&&c!==!0||StackExchange.settings.site.newTitleSearchBoxEnabled&&$(".title-float-selected:visible").length>0)){for(var p=l.split(" "),d=0,h=0;h<p.length;h++)$.trim(p[h]).length>0&&d++;var f=(new Date).getTime(),g=(f-u)/1e3;(c===!0||!(3>d||5>g)||e.hasClass("edit-field-overlayed"))&&(u=f,r=l,n.siteName&&(document.title=l?l+" - "+n.siteName:a),t.empty(),StackExchange.helpers.addSpinner(t),i&&i.fadeOutAndRemove(),$.ajax({"url":s,"dataType":"json","data":{"title":l},"success":function(e){e&&e.content&&(t.html(e.content),setTimeout(function(){o(t.find(".answer-link a").attr("target","_blank"))},1))},"complete":function(){StackExchange.helpers.removeSpinner(t)}}))}},l=!1;return t.mouseenter(function(){l=!0}).mouseleave(function(){l=!1}),e.keyup(c).blur(function(){var e=function(){u=0,c()};l?t.one("mouseleave",e):e()}),function(e){u=0,c(e)}},m=function(){try{localStorage.removeItem("nextPrevTrackState"),localStorage.removeItem("nextPrevTrackState2"),localStorage.removeItem("nextPrevState")}catch(e){}};return{"initTitleSearch":g,"showShareTip":s,"getQuestionId":l,"initShareLinks":f,"canViewVoteCounts":function(){return n},"init":function(i){n=i.canViewVoteCounts,StackExchange.question.fullInit?StackExchange.question.fullInit(i):StackExchange.question.bindAnonymousVoteDisclaimers(),StackExchange.comments.init({"autoShowCommentHelp":i.autoShowCommentHelp,"highlightColor":i.highlightColor,"commentHighlightColor":i.commentHighlightColor,"commentHighlightFocus":i.commentHighlightFocus,"backgroundColor":i.backgroundColor}),f(i),i.showAnswerBanWarning&&$("#wmd-input").one("focus",c),i.showAnswerHelp&&!i.showAnswerBanWarning&&$("#wmd-input").one("focus",u),i.focusPostEditor&&($("#wmd-input").focus(),$("#post-form")[0].scrollIntoView(!0)),i.showCitation&&$(document).on("click","div .cite-link",function(){var e=$(this).closest(".post-menu");e.find(".close-share-tip").click(),citation.show($(this))}),r=i.backgroundColor,t=i.highlightColor,e(),m()}}}(),StackExchange.question.bindAnonymousVoteDisclaimers=function(){function e(e){var t=$(this),n=t.closest("div.vote"),r=t.prop("className"),i=/vote-up/.test(r),a=/vote-down/.test(r),s=/star/.test(r),o=t.closest(".answer").length;if(e.preventDefault(),i||a){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Voting isn't available in read-only mode.",{"transient":!0}),void 0;var u=n.find("input").val();if(StackExchange.options.isMobile){StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+u+"?voteTypeId="+(i?2:3));var c="Thank you for your feedback.<br />"+(o?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this answer."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to vote for this question."}({"startAnchor":'<a href="/users/login?returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}));StackExchange.helpers.showMessage(t,c,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}else{var l="anon-vote-popup-"+u;if(n.is(":working")||$("."+l).length)return;n.data("working",!0),$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var p=$('<div class="anon-vote-popup vote-popup popup">'+function(e){return"Sending feedback"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(l).addSpinner();p.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("vote_popup.show",{"type":o?2:1})}),$.ajax({"type":"POST","url":"/posts/popup/anon-vote/"+u+"?voteTypeId="+(i?2:3),"dataType":"html","success":function(e){p.html(e)},"error":function(){p.remove()},"complete":function(){n.data("working",!1)}})}}else if(s){if(StackExchange.options.inReadOnly)return n.showErrorMessage("Favoriting isn't available in read-only mode.",{"transient":!0}),void 0;$(".anon-vote-popup").fadeOutAndRemove();var c=o?function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this answer."}({"startAnchor":'<a href="/users/login?ssrc=fav_answer&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"}):function(e){return"Please "+e.startAnchor+"log in or register"+e.endAnchor+" to favorite this question."}({"startAnchor":'<a href="/users/login?ssrc=fav_question&returnurl='+escape(document.location)+'">',"endAnchor":"</a>"});StackExchange.using("gps",function(){StackExchange.gps.track("favorite_popup.show",{})}),StackExchange.helpers.showMessage(t,c,{"type":"info","position":{"my":"left top","at":"right center"},"css":{"margin-left":"-10px"}})}}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var t=$(this);t.data("bound-anonymous")||(t.data("bound-anonymous",!0),t.click(e))}),StackExchange.question.bindFetchAcceptedAnswerDates()},StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var e=$(this);if(!e.is(":working")){e.working(!0);var t=e.closest(".answer").data("answerid");if(!t)return e.attr("title",""),void 0;var n="/posts/"+t+"/accepted-answer-date";$.get(n,function(t){e.attr("title",t)})}})},StackExchange.comments=function(){function e(e,t){this.postId=e,this.jPost=t.closest(".question, .answer, div[id^='post-']"),this.jDiv=t,this.jCommentsList=t.find(".js-comments-list"),this.jCommentsLinkContainer=$("#comments-link-"+e)}function t(e){"string"==typeof e&&(e=$("#comment-"+e)),StackExchange.settings.site.commentHighlightingWithCSS?(e.addClass("comment__highlight"),setTimeout(function(){e.removeClass("comment__highlight new_comment")},0)):e.css({"backgroundColor":l}).animate({"backgroundColor":d},2e3,"linear",function(){$(this).css("background-color","").removeClass("new_comment")})}function n(e){var t=$("#comments-"+e);if(t.length){var n=r(t),i=n.jCommentsLinkContainer,a=(n.jCommentsList,n.remainingCommentsCount());a++,i.data("comments-count",a),i.attr("title","expand to show all comments on this post, or add one of your own"),n.setCommentsMenu(a),i.removeClass("disabled-link"),n.remainingCommentsCount(a),i.show().fadeTo("fast",.7).fadeTo("fast",1)}}function r(t){var n=t.constructor===$?t:$(t),r=n.closest(".question, .answer, div[id^='post-']").find(".js-comments-container"),i=r.attr("id").replace(/^comments-/,"");
if(f[i])return f[i];var a=new e(i,r);return f[i]=a,a}function i(e){return 0===window.location.pathname.indexOf("/review")?0:e.closest(".question").length?1:e.closest(".answer").length?2:0}function a(e){var t=$(this),n=r(t),a=0===n.remainingCommentsCount(),o=t.hasClass("disabled-link"),u=n.jCommentsLinkContainer.data("rep");a&&n.jCommentsLinkContainer.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(n.jCommentsLinkContainer,function(e){return 1==e.rep,"Commenting requires an account with "+e.rep+" reputation"}({"rep":u}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"},"relativeToBody":!0}):s(n.jCommentsLinkContainer.attr("id").replace("comments-link-",""),i(t))),a&&n.jCommentsLinkContainer.data("reg")&&StackExchange.helpers.showMessage(t,function(e){return 1==e.rep,"You must have "+e.linkStart+e.rep+" reputation"+e.linkEnd+" to comment"}({"rep":u,"linkStart":"<a href='/help/privileges/comment'>","linkEnd":"</a>"}),{"type":"info","position":{"dimissible":!0,"my":"left top","at":"right center"},"relativeToBody":!0}),t.hasClass("js-show-link")&&StackExchange.using("gps",function(){StackExchange.gps.track("comment.show")});var c=!1;if(t.hasClass("js-add-link")){c=!0;var l="other";n.jPost.hasClass("question")?l="question":n.jPost.hasClass("answer")&&(l="answer");var p=a?"all_shown":"hidden";StackExchange.using("gps",function(){StackExchange.gps.track("comment.add",{"location":l,"type":p})})}o||(e.preventDefault(),n.addShow(!1,c))}function s(e,t){var n="anon-vote-popup-"+e;if(!$("."+n).length){$(".anon-vote-popup").fadeOutAndRemove(),StackExchange.helpers.removeMessages();var r=$('<div class="anon-vote-popup comment-popup popup">'+function(e){return"Loading"+e.nbsp}({"nbsp":"&nbsp;"})+"</div>").addClass(n).addSpinner();r.appendTo("body").center().fadeIn("fast"),StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show",{"type":t})}),$.ajax({"type":"POST","url":"/posts/popup/anon-comment/"+e,"dataType":"html","success":function(e){r.html(e)},"error":function(){r.remove()}})}}function o(e){var t=e&&e.post||document;f={},$(t).off("click","a.js-add-link",a).on("click","a.js-add-link",a),$(t).off("click","a.js-show-link",a).on("click","a.js-show-link",a),t==document&&c(),u(null,!0),e&&e.highlightColor&&e.highlightColor.length&&(l=e.highlightColor),e&&e.commentHighlightColor&&e.commentHighlightColor.length&&(p=e.commentHighlightColor),e&&e.backgroundColor&&e.backgroundColor.length&&(d=e.backgroundColor),e&&e.commentHighlightFocus&&(h=e.commentHighlightFocus)}function u(t,n){n||(m=t),t=t||m||{};for(var r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r])}function c(){if(0!=$(".question[data-questionid]").length){var e=StackExchange.question.getQuestionId();$(".js-comment .comment-date > span").each(function(){var t=$(this),n=t.closest(".answer"),r=n&&n.length?n.data("answerid"):0,i=t.closest(".js-comment").attr("id").substr("comment-".length),a=r?r:e,s="#comment"+i+"_"+a;location.href.indexOf("/questions/")>0?t.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({"hash":s})):t.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({"hash":s,"pid":a}))})}}var l,p,d,h,f={},g=function(){};e.prototype={"checkDiscussion":g,"ensureInput":g,"renderTextInput":g,"alterAddEditDataBeforeSubmit":g,"saveEditingComments":g,"restoreEditingComments":g,"isInputShown":function(){var e=this.jDiv.find('form[id^="add-comment-"]');return e.children().length&&e.is(":visible")},"commentsShown":function(){this.remainingCommentsCount(0)},"remainingCommentsCount":function(e){return"undefined"==typeof e?parseInt(this.jCommentsList.data("remaining-comments-count"))||0:(this.jCommentsList.data("remaining-comments-count",e),void 0)},"addShow":function(e,t){var n=this,r=this.loadAllComments().done(function(){n.checkDiscussion()});if(t){var i=this.ensureInput();i&&!e&&i.focus()}r.done(function(){i&&i.length>0&&n.jCommentsLinkContainer.hide()})},"ajax":function(e,t,n,r){n&&!r&&StackExchange.helpers.addSpinner(n,{"margin-left":"10px"});var i=this;return $.ajax(e).fail(function(e){var a=e.responseText;(!a||a.indexOf("<html")>=0)&&(a=t||"An error occured"),StackExchange.helpers.showErrorMessage(n||i.jDiv,a,{"transient":409==e.status}),n&&!r&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},"setCommentsMenu":function(e){var t="",n="";e>0&&(n=function(e){return 1==e.count?"show <b>"+e.count+"</b> more comment":"show <b>"+e.count+"</b> more comments"}({"count":e})),this.isInputShown()||!this.jCommentsList.data("cansee")&&!this.jCommentsList.data("canpost")||(t="add a comment"),t.length||n||!this.jCommentsList.data("comments-unavailable")||(t="comments disabled on deleted / locked posts / reviews"),StackExchange.options.inReadOnly&&(t="");var r=this.jCommentsLinkContainer.find(".js-add-link"),i=this.jCommentsLinkContainer.find(".js-show-link");r.html(t),i.html(n),t.length?r.removeClass("dno"):r.addClass("dno"),n.length?i.removeClass("dno"):i.addClass("dno"),t.length&&n.length?this.jCommentsLinkContainer.find(".js-link-separator").removeClass("dno"):this.jCommentsLinkContainer.find(".js-link-separator").addClass("dno"),this.jCommentsList.data("addlink-disabled")&&r.addClass("disabled-link")},"clearHighlights":function(){this.jCommentsList.find(".js-comment").removeClass("new_comment").css("background-color","")},"showComments":function(e,n,r,i){this.saveEditingComments(n);var a=!r&&(p||l&&d),s={};if(this.clearHighlights(),a&&this.jCommentsList.find(".js-comment").each(function(e,t){t.id&&t.id.length&&(s[t.id]=!0)}),this.jCommentsList.html(e),a){var o=null;this.jCommentsList.find(".js-comment").each(function(e,t){t.id&&t.id.length&&!s[t.id]&&(o||(o=t),$(t).addClass("new_comment"))});var u=this.jCommentsList.find(".new_comment");p?u.css({"backgroundColor":p}).removeClass("new_comment"):t(u),h&&u.length&&!i&&u[0].scrollIntoView(!0)}this.restoreEditingComments(),this.setCommentsMenu(0),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),c(),this.commentsShown()},"loadAllComments":function(e,t,n,r){this.jDiv.removeClass("dno");var i=0===this.remainingCommentsCount();if(!e&&i)return $.Deferred().resolve().promise();var a=this;return this.ajax({"type":"GET","url":"/posts/"+this.postId+"/comments"+(t||""),"data":{"tables":this.jCommentsList.is("tbody")},"dataType":"html"},"An error occurred while fetching comments").done(function(e){a.showComments(e,null,n,r)}).promise()}};var m;return{"init":o,"loadAll":function(e,t){return r(e).loadAllComments(!0,t,!0,!0)},"realtimeMessage":n,"flashHighlight":t,"extendPostUi":u,"uiForPost":r}}(),StackExchange.share=function(){function e(e,t,n){window.open(e,t,n)||(window.location.href=e)}function t(e,t,n){n="undefined"!=typeof n?n:"1",t+="="+n;var r=e.indexOf("?"),i=e.indexOf("#");return-1==r?-1==i?e+"?"+t:e.substring(0,i)+"?"+t+e.substring(i):-1==i?e+"&"+t:e.substring(0,i)+"&"+t+e.substring(i)}return{"gplus":function(n,r,i,a){r=t(r,"sgp",a),n.click(function(){e("https://plus.google.com/share?url="+encodeURIComponent(r),"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},"twitter":function(n,r,i,a){r=t(r,"stw",a);var s=117;i.length>s&&(i=i.substring(0,s-3)+"..."),n.click(function(){e("https://twitter.com/share?url="+encodeURIComponent(r)+"&ref=twitbtn&text="+encodeURIComponent(i),"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},"facebook":function(n,r,i,a){r=t(r,"sfb",a),n.click(function(){e("https://www.facebook.com/sharer.php?u="+encodeURIComponent(r)+"&ref=fbshare&t="+encodeURIComponent(i),"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}(),$.fn.extend({"postId":function(){var e=this.first();return e.hasClass("answer")&&e.hasClass("question")||(e=e.closest(".answer, .question")),parseInt(e.find(".vote input")[0].value)}}),StackExchange.newsletterAd=function(){function e(e){var t=$('<div class="popup newsletter-popup lightbox-panel" style="display:block"></div>').append($("<div />",{"class":"popup-close"}).append("<a>&times;</a>",{"title":"close this popup (or hit Esc)"})).append(e);$("body").loadPopup({"lightbox":!0,"html":t,"target":$("body")})}function t(t){$("#newsletter-signup").click(function(){var e=$(this);StackExchange.helpers.addSpinner("#newsletter-signup-container"),$.ajax({"url":t.subscribeUrl.replace(/-1/,StackExchange.options.user.userId),"type":"POST","dataType":"json","data":{"fkey":StackExchange.options.user.fkey,"siteId":StackExchange.options.site.id},"success":function(t){t.url?window.location.href=t.url:"confirmed"==t.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==t.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"error":function(){e.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({"br":"<br />"}))},"complete":function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})}),$("#newsletter-preview").click(function(){var t=$(window).height(),n=Math.min(600,t-100),r=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',n,'px;">','<iframe src="',$(this).attr("href"),'" width="660" height="',n,'" frameborder="0"></iframe>',"</div>"].join("");return e(r),!1})}return{"init":t,"loader":function(e,t){var e=t||e,n=$(".newuser-greeting");$.ajax({"url":"/newsletter/targetted/ajax","data":{"domain":e},"success":function(e){$("#newsletter-ad").remove(),n.empty().append($(e))},"complete":function(){n.attr("class","").attr("style","")}}),t||(window.sessionStorage.tNewsletter=e+"-continued")}}}(),function(e,t,n,r){var i=!("selectionStart"in e("<input type='text' />")[0]);e.fn.caret=function(e,a){var s,o,u=this[0];if("object"==typeof e&&"number"==typeof e.start&&"number"==typeof e.end)s=e.start,o=e.end;else if("number"==typeof e&&"number"==typeof a)s=e,o=a;else if("string"==typeof e)(s=u.value.indexOf(e))>-1?o=s+e[t]:s=null;else if("[object RegExp]"===Object.prototype.toString.call(e)){var c=e.exec(u.value);null!=c&&(s=c.index,o=s+c[0][t])}if("undefined"!=typeof s){if(i){var l=this[0].createTextRange();l.collapse(!0),l.moveStart("character",s),l.moveEnd("character",o-s),l.select()}else this[0].selectionStart=s,this[0].selectionEnd=o;return this[0].focus(),this}if(i){var p=document.selection;if("textarea"!=this[0].tagName.toLowerCase()){var d=this.val(),h=p[n]()[r]();h.moveEnd("character",d[t]);var f=""==h.text?d[t]:d.lastIndexOf(h.text);h=p[n]()[r](),h.moveStart("character",-d[t]);var g=h.text[t]}else{var h=p[n](),m=h[r]();m.moveToElementText(this[0]),m.setEndPoint("EndToEnd",h);var f=m.text[t]-h.text[t],g=f+h.text[t]}}else var f=u.selectionStart,g=u.selectionEnd;var v=u.value.substring(f,g);return{"start":f,"end":g,"text":v,"replace":function(e){return u.value.substring(0,f)+e+u.value.substring(g,u.value[t])}}}}(jQuery,"length","createRange","duplicate"),StackExchange.nocaptcha=function(){function e(e,n){var r=['<div class="popup captcha-popup lightbox-panel" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",e,"</div>"].join("");$("body").loadPopup({"target":$("body"),"html":r,"lightbox":!0,"loaded":function(e){t(e,n)}})}function t(e,t){var n=e.find("form:first");StackExchange.helpers.enableSubmitButton(n),n.submit(function(){return StackExchange.helpers.disableSubmitButton(n),n.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/nocaptcha","type":"POST","dataType":"json","data":n.serialize(),"success":function(r){r.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),n.find(".form-error").html(r.captchaError),Recaptcha.reload()):(e.find(".popup-close a").click(),t(r))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),StackExchange.helpers.showErrorMessage(n,"An error occurred submitting the CAPTCHA")}}),!1})}return{"init":e}}(),StackExchange.captcha=function(){function e(e,n){var r=['<div class="popup captcha-popup lightbox-panel" style="display: block; text-align: left;">','<div class="popup-close">',$("<a>",{"title":"close this popup (or hit Esc)","text":"×"}).prop("outerHTML"),"</div>",e,"</div>"].join("");$("body").loadPopup({"html":r,"target":$("body"),"lightbox":!0,"loaded":function(e){t(e,n)}})}function t(e,t){var n=e.find("form:first");$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{"theme":"clean","lang":StackExchange.options.site.recaptchaAudioLang,"custom_translations":{"visual_challenge":"Get a visual challenge","audio_challenge":"Get an audio challenge","refresh_btn":"Get a new challenge","instructions_visual":"Type the text:","instructions_audio":"Type what you hear:","help_btn":"Help","play_again":"Play sound again","cant_hear_this":"Download sound as MP3","incorrect_try_again":"Incorrect. Try again.","image_alt_text":"reCAPTCHA challenge image","privacy_and_terms":"Privacy & Terms"},"callback":Recaptcha.focus_response_field}),StackExchange.helpers.enableSubmitButton(n),n.submit(function(){return StackExchange.helpers.disableSubmitButton(n),n.find('input[type="submit"]').addSpinnerAfter(),$.ajax({"url":"/captcha","type":"POST","dataType":"json","data":n.serialize(),"success":function(r){r.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),n.find(".form-error").html(r.captchaError),Recaptcha.reload()):(e.find(".popup-close a").click(),t(r))},"error":function(){StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(n),StackExchange.helpers.showErrorMessage(n,"An error occurred submitting the CAPTCHA")}}),!1})})}return{"init":e}}(),StackExchange.gps=function(){function e(e){return m?!0:(m=!0,e&&t()?(StackExchange.gps.sendPending=s,StackExchange.gps.track=o,c(),s(),n(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1"),n(".question-page",".js-gps-related-questions .spacer","related_questions.click"),n(".question-page .post-taglist",".post-tag","question_tags.click",", location:1"),n(".question-page #sidebar .tagged",".post-tag","question_tags.click",", location:2"),r(),!0):(StackExchange.gps.track=function(e,t,n,r){r&&r()},delete StackExchange._gps_track,!1))}function t(){if(!window.localStorage)return!1;try{if(window.localStorage["gps-probe"]="1","1"!=window.localStorage["gps-probe"])return!1;window.localStorage.removeItem("gps-probe")}catch(e){return!1}return!0}function n(e,t,n,r){$(e).find(t).each(function(e){$(this).addClass("js-gps-track").data("gps-track",n+"({ position:"+(e+1)+r+" })")})}function r(e){var t=$(e||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var e=$.trim($(this).data("gps-track"));if(e)for(var t=i(e),n=0;n<t.length;n++){var r=t[n];StackExchange.gps.track(r[0],r[1],!0)}});f("bindTrackClicks bound {0} elements in {1}",t.length,e||"document")}function i(e){function t(e){if("true"===e)return!0;if("false"===e)return!1;if("'"===e[0]||'"'===e[0])return e.substring(1,e.length-1);var t=parseFloat(e);return isNaN(t)?e:t}for(var n=[],r=e.match(/([a-z._]+)(\([^)]+\))?/gi),i=0;i<r.length;i++){var a=r[i];if(a.indexOf("{")<0)n.push([a,{}]);else{for(var s=a.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),o=s[1],u=$.trim(s[2]),c=u.match(/[^,]+/gi),l={},p=0;p<c.length;p++){var d=c[p],h=d.indexOf(":"),f=$.trim(d.substr(0,h)),g=$.trim(d.substr(h+1)),m=t(g);l[f]=m}n.push([o,l])}}return n}function a(e,t){$(e).on("click",t+" a[href]:not(.question-hyperlink, .answer-hyperlink)",function(){var e=$(this),t=e.attr("href");StackExchange.helpers.isInNetwork(t)||("undefined"==typeof ga?f("outbound link clicked "+t):ga("send","event","outbound","click",t,{"useBeacon":!0}))})}function s(e){var t=l();if(t.length>0){for(var n=(new Date).getTime(),r=[],i=0;i<t.length&&r.length<20;i++){var a=t[i],s=n-a.now;0>s||s>36e5?d(a):r.push(a)}r.length>0?h(r,e):e&&e()}}function o(e,t,n,r){var i={"evt":e,"properties":t||{},"now":(new Date).getTime()};p(i),navigator&&navigator.sendBeacon&&(n=!1),n?(r&&r(),window.setTimeout(s,1e4)):s(r)}function u(e){e&&StackExchange.options&&StackExchange.options.user&&(e.properties&&!e.properties.user_type&&(e.properties.user_type=StackExchange.options.user.user_type),!e.ab&&StackExchange.options.user.ab&&(e.ab=StackExchange.options.user.ab))}function c(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(e,t){p(t)}),delete StackExchange._gps_track)}function l(){var e=localStorage[g];return e?JSON.parse(e):[]}function p(e){u(e);var t,n=localStorage[g];if(n){var r=JSON.parse(n);r.push(e),t=JSON.stringify(r)}else t=JSON.stringify([e]);f("addToPending "+JSON.stringify(e)),localStorage[g]=t}function d(e){var t=localStorage[g];if(t){for(var n=JSON.parse(t),r=JSON.stringify(e),i=-1,a=0;a<n.length;a++){var s=JSON.stringify(n[a]);if(r==s){i=a;break}}if(-1!=i)return n.splice(i,1),0==n.length?(localStorage.removeItem(g),void 0):(localStorage[g]=JSON.stringify(n),void 0)}}function h(e,t){$.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);v[r]&&(e.splice(n,1),n--)}for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);v[r]=!0}var i=JSON.stringify(e);if(navigator&&navigator.sendBeacon)try{f("sending (beacon): "+i);var a="/gps/event";if(StackExchange&&StackExchange.options&&StackExchange.options.site&&StackExchange.options.site.routePrefix&&StackExchange.options.site.routePrefix.length&&(a=StackExchange.options.site.routePrefix+a),navigator&&navigator.sendBeacon(a,i)){for(var n=0;n<e.length;n++){d(e[n]);var r=JSON.stringify(e[n]);delete v[r]}return t&&t(),void 0}}catch(s){f(s)}f("sending (AJAX): "+i),$.ajax({"type":"POST","url":"/gps/event","data":{"data":i},"success":function(){for(var t=0;t<e.length;t++)d(e[t])},"complete":function(){for(var n=0;n<e.length;n++){var r=JSON.stringify(e[n]);delete v[r]}t&&t()}})}function f(e){if((StackExchange.options&&StackExchange.options.enableLogging2||$.cookie("devlog"))&&"string"==typeof e){if(arguments.length>1){var t=Array.prototype.slice.call(arguments,1);e=String.prototype.formatUnicorn.apply(e,t)}console.log("gps: "+e)}}var g="gps-pending",m=!1,v={},b=StackExchange.gps.track,k=StackExchange.gps.sendPending;return{"init":e,"bindTrackClicks":r,"track":b,"sendPending":k,"trackOutboundClicks":a}}(),StackExchange.openid=function(){function e(e,t){return e?(t&&$(e).data("ssrc",t),$(e).data("ssrc")):p}function t(t,n){var r=e(n);t&&(StackExchange.gps.track("openid.click",{"openid_provider":t,"location":r},!0),StackExchange.gps.track("signup.openid.click",{"openid_provider":t,"location":r},!0)),StackExchange.gps.track("signup.start",{"openid_provider":t,"location":r,"tid":StackExchange.options.user.tid},!0)}function n(n,r,i){var s=decodeURIComponent(r),p="unknown";i&&i.length?p=i:(0===s.indexOf("/questions/")&&(p="question_page"),"/questions/ask"===s&&(p="question_ask"));var d=$(n);e(d,p);var h=d.find(".new-login-left"),f=d.find(".new-login-right"),g=h.find(".show-more-options");g.click(function(){return g.hide(),f.show(),!1});var m=f.find(".hide-more-options");m.click(function(){return g.show(),f.hide(),!1}),d.removeClass("dno"),a(d,f);var v=h.find(".google-login");v.click(function(){t("Google",d),u(d)});var b=h.find(".facebook-login");b.click(function(){t("Facebook",d),o(d)});var k=h.find(".stackexchange-login");k.click(c(function(){t("Stack Exchange",d),StackExchange.navPrevention.stop(),window.location="/users/signup?ssrc="+encodeURIComponent(p)+"&returnUrl="+encodeURIComponent(s)})),d.find(".submit-openid").click(function(){l(d,s)})}function r(n,r,i,a,s){var c=decodeURIComponent(r);e(n,i);var p=n.find(".google-login");p.click(function(){t("Google",n),u(n)});var d=n.find(".facebook-login");d.click(function(){t("Facebook",n),o(n)});var h=n.find(".stackexchange-login");h.click(function(){t("Stack Exchange",n),window.location="/users/signup?ssrc="+encodeURIComponent(i)+"&returnUrl="+encodeURIComponent(c)}),n.find(".submit-openid").click(function(){l(n,c,a,s)})}function i(e,n){var r=$(e),i=r.find(".google-login");i.click(function(){t("Google",r),u(r)});var a=r.find(".facebook-login");a.click(function(){t("Facebook",r),o(r)});var s=r.find(".stackexchange-login");s.click(function(){t("Stack Exchange",r),window.location="/users/signup?ssrc=about&returnUrl="+encodeURIComponent(n)}),r.find(".submit-openid").click(function(){l(r,n)})}function a(e,t){var n=t.find(".option-extra-fields");n.hide();var r=t.find(".yahoo-button");r.click(function(){n.hide(),s(e,"yahoo")});var i=function(r){var i="."+r+"-option";n.show(),n.find("> div:not("+i+")").hide(),n.find(i+", .extra-field-container").show(),t.find(".extra-field").val("").focus();var a=t.find(".extra-field-submit");a.unbind("click"),a.click(function(){s(e,r,t.find(".extra-field").val())})},a=t.find(".blogger-button");a.click(function(){i("blogger")});var o=t.find(".aol-button");o.click(function(){i("aol")})}function s(t,n,r){var i=d[n];r&&(i=i.replace("{username}",r)),t.find(".ssrc").val(e(t)),t.find(".use-facebook").val(""),t.find(".use-google").val(""),t.find(".manual-openid").val(i),t.find(".submit-openid").click()}function o(t){t.find(".ssrc").val(e(t)),t.find(".use-facebook").val("true"),t.find(".use-google").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function u(t){t.find(".ssrc").val(e(t)),t.find(".use-google").val("true"),t.find(".use-facebook").val(""),t.find(".manual-openid").val(""),t.find(".submit-openid").click()}function c(e){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(e)})}}function l(t,n,r,i){var a=t.find(".manual-openid").val(),s=t.find(".use-facebook").val(),o=t.find(".use-google").val();c(function(){var u=!!StackExchange.options.site.isChildMeta,c=(u?StackExchange.options.site.parentUrl:"")+"/users/authenticate?returnurl="+encodeURIComponent(n),l=$('<form method="post" action="'+c+'"></form>');if(a){var p=$('<input type="hidden" name="openid_identifier" />');l.append(p),p.val(a)}else{var d=$('<input type="hidden" name="oauth_version" />'),h=$('<input type="hidden" name="oauth_server" />');l.append(d),l.append(h),d.val("2.0"),s?h.val("https://www.facebook.com/v2.0/dialog/oauth"):o&&h.val("https://accounts.google.com/o/oauth2/auth")}l.append("<input type='hidden' name='fkey' value='"+StackExchange.options.user.fkey+"' />"),$('<input type="hidden" name="ssrc" />').val(e(t)).appendTo(l),r&&i&&($('<input type="hidden" name="anon_vote_type" />').val(r).appendTo(l),$('<input type="hidden" name="anon_vote_hash" />').val(i).appendTo(l)),StackExchange.navPrevention.stop(),l.hide().appendTo("body").submit()})()}var p="unknown",d={"yahoo":"http://yahoo.com/","google":"https://www.google.com/accounts/o8/id","aol":"http://openid.aol.com/{username}","blogger":"http://{username}.blogspot.com/"};return{"initPostLogin":n,"initAnonPopup":r,"initTourSignup":i}}();var UniversalAuth=function(){return{"performAuth":function(){if(UniversalAuth.enabled()){var e=$.cookie("uauth");null!=e&&($.post("/users/login/universal/request",function(e){$.each(e,function(e,t){var n="//"+t.Host+"/users/login/universal.gif?authToken="+encodeURIComponent(t.Token)+"&nonce="+encodeURIComponent(t.Nonce);$(document).ready(function(){$("#footer").append('<img style="display:none" src="'+n+'"></img>')})})},"json"),$.cookie("uauth",null,{"path":"/","domain":document.domain}))}},"enabled":function(){return!0}}}();StackExchange.ready(function(){function e(){try{$.cookie("fkey",StackExchange.options.user.fkey,{"path":"/","expires":1/144})}catch(e){}}if(StackExchange.options.user.isAnonymous){var t=/\bfkey=/i;$(document).ajaxSend(function(n,r,i){"post"===i.type.toLowerCase()&&(t.test(i.url)||t.test(i.data))&&e()}),$(document).on("submit","form",function(){var t=$(this);"post"===t.attr("method").toLowerCase()&&t.find("input[name='fkey']").length&&e()})}}),StackExchange.loadJqueryUi=function(){var cssLink=StackExchange.settings.paths.jQueryUICSSPathOverride,jsLink=StackExchange.settings.paths.jQueryUIJSPathOverride;if(cssLink||(cssLink="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/themes/smoothness/jquery-ui.css"),jsLink||(jsLink="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"),$.ui)return $.Deferred().resolve();$("<link>").attr({"href":cssLink,"rel":"stylesheet","type":"text/css","media":"all"}).appendTo("head");var result=$.Deferred(),locale=StackExchange.options.locale,datepickerLanguageGetter,datepickerLanguageScript;return $.ajaxSetup({"cache":!0}),"en"!==locale&&(datepickerLanguageGetter=$.ajax({"url":"/content/js/third-party/jquery-ui/datepicker-"+locale+".js","dataType":"text","type":"GET"}).done(function(e){datepickerLanguageScript=e})),$.when(datepickerLanguageGetter||$.Deferred().resolve(),$.getScript(jsLink)).done(function(){eval(datepickerLanguageScript),result.resolve()}),$.ajaxSetup({"cache":!1}),result.promise()},StackExchange.processTimings=function(){function e(e,t){var n={};t=t||e.name||!1;for(var r in e)if("toJSON"!==r&&"entryType"!==r)if(t){if("subresources"===r)continue;var i=Math.round(e[r]);n[r]=i?i:e[r]}else 0!==e[r]&&(n[r]=0===e[r]?null:e[r]-e.navigationStart);return n}function t(){if(StackExchange.options.timingsGuid&&window.performance&&window.performance.timing&&window.performance.getEntriesByType){var t=[],n=[],r=!1,i=function(i){for(var a=0;a<n.length;a++)n[a].cancel();if(!r){r=!0;var s=$.extend(e(window.performance.timing,!1),{"guid":StackExchange.options.timingsGuid,"Info":StackExchange.options.timingsInfo,"fkey":StackExchange.options.user.fkey,"subresources":t.map(function(t){return e(t,!0)})}),o=JSON.stringify(s);if(navigator&&navigator.sendBeacon&&-1===location.search.indexOf("__debug=1"))try{if(navigator&&navigator.sendBeacon("/_/client-timings",o))return}catch(u){}i||$.post("/_/client-timings",o)}},a=StackExchange.helpers.DelayedReaction(i,StackExchange.settings.monitoring.clientTimingsDebounceTimeout,{"sliding":!0});n.push(a);var s=StackExchange.helpers.DelayedReaction(i,StackExchange.settings.monitoring.clientTimingsAbsoluteTimeout);s.trigger(),n.push(s);var o={},u=window.setInterval(function(){for(var e=window.performance.getEntriesByType("resource"),n=!1,r=0;r<e.length;r++)if(!o[r]){var i=e[r];t.push(i),n=!0,o[r]=!0}n&&a.trigger()},50);n.push({"cancel":function(){u&&(window.clearInterval(u),u=null)}}),window.performance.onresourcetimingbufferfull=function(){window.performance.clearResourceTimings(),o={}},$(window).unload(function(){i(!0)})}}return t}(),StackExchange.showFlashMessageIfAny=function(){var e="flash-message-json",t=$.cookie(e);if(null!==t)try{$.cookie(e,null,{"path":"/","domain":document.domain});var n=JSON.parse(t);if(StackExchange.options.isMobile)StackExchange.helpers.showMobileMessage(n.message,n.type);else if("toast"===n.position){var r={"type":n.type,"position":"toast","transient":!0,"transientTimeout":4e3};StackExchange.helpers.showMessage(document.body,n.message,r)}else StackExchange.helpers.showBannerMessage(n.message,n.type)}catch(i){return}},StackExchange.prepareEditor=function(e){var t=e.postfix||"",n=function(){setTimeout(function(){StackExchange.editor.initIfShown(e)},1)};if(!e.onDemand)return StackExchange.using("editor",n),void 0;for(var r="bold-button italic-button spacer1 link-button quote-button code-button image-button spacer2 olist-button ulist-button heading-button hr-button spacer3 undo-button redo-button".split(" "),i=$('<ul id="wmd-button-row'+t+'" class="wmd-button-row" />').appendTo(".wmd-button-bar"),a=0,s=0;s<r.length;s++){var o=r[s],u=/spacer/.test(o),c=$("<li id='wmd-"+o+t+"' />").prop("className","wmd-"+(u?"spacer":"button")).css("left",25*s).appendTo(i);$("<span />").css("background-position",a+"px -20px").appendTo(c),u||(a-=20)}var l=!1;$("#wmd-input, #title, #tagnames, #edit-comment, #m-address, #display-name").one("focus click keydown",function(){if(!l){l=!0;var t=function(){i.remove(),e.autoShowMarkdownHelp&&(e.immediatelyShowMarkdownHelp=!0),n()};i.addSpinner({"float":"right"}),StackExchange.using("editor",t)}})},StackExchange.bindShowMoreHotNetworkQuestions=function(){var e,t=$("#hot-network-questions");if(t.length&&(e=t.find(".js-show-more")).length){var n=t.find(".js-hidden");e.click(function(){return n.show(),e.remove(),!1});var r=$("#mainbar").height(),i=$("#sidebar").height()+550;r>i&&(n.each(function(){return i+=$(this).show().height(),r>i}),0==n.filter(":hidden").length&&e.remove())}},StackExchange.Auth=function(){var e=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].id==t.id){t.changed=e[r].message==t.message,e[r].message=t.message,n=!0;break}n||(t.changed=!0,t.index>=e.length?e.push(t):e.splice(t.index,0,t))},t=function(t,n,r){var i=15,a=8,s=t.val(),o=/[a-z]/.test(s),u=/[A-Z]/.test(s),c=/\d/.test(s),l=/(_|[^\w\d])/.test(s),p=0;if(o&&p++,u&&p++,c&&p++,l&&p++,2===p&&s.length>=i)return r(n,"pw-weak"),r(n,"pw-short"),void 0;var d=$("<span><p>"+function(e){return"Please add one of the following things to make your password stronger:"+e.pEnd+" "+e.listStart+" "+e.char+" letters "+e.itemEnd+" "+e.num+" numbers "+e.itemEnd+" "+e.listEnd}({"pEnd":"</p>","listStart":"<ul>","listEnd":"</ul>","itemEnd":"</li>","char":'<li id="ch">',"num":'<li id="num">'})+"</span>");(o||u)&&c?r(n,"pw-weak"):3>p?((o||u)&&d.find("#ch").remove(),c&&d.find("#num").remove(),e(n,{"id":"pw-weak","index":1,"attachTo":t,"message":d})):r(n,"pw-weak");var h=t.val().length;if(a>h){var f=a-h;e(n,{"id":"pw-short","index":2,"attachTo":t,"message":function(e){return 1==e.remaining?"Must contain at least "+e.remaining+" more character.":"Must contain at least "+e.remaining+" more characters."}({"remaining":f})})}else r(n,"pw-short")};return{"addOrUpdateError":e,"passwordStrengthValidation":t}}(),StackExchange.Hero=function(){var e={"name":null,"version":null},t=function(){var t="hero-dismissed",r={"ld":"","d":[]},i=$.cookie(t);if(i){var a=i.split("!");a.shift(),r.d=a}r.ld=(new Date).getTime();var s=e.name+"_"+e.version,o=!0;for(var u in r.d){var c=r.d[u],l=c.split("_");if(l===e.name){r.d[u]=s,o=!1;break}}o&&r.d.push(s),$.cookie(t,n(r),{"path":"/","expires":365})},n=function(e){return[e.ld].concat(e.d).join("!")},r=function(t,n){e.name=t,e.version=n};return{"init":r,"dismiss":t}}(),StackExchange.ga=function(){var e,t=0,n={},r=function(e){e.find("[data-ga]").each(function(){var e=$(this),t=e.is("form"),n=t?"submit":"click";e.on(n,function(){var n=h(e);null!==n&&(c(e,n),t&&p(e,n))})}),e.find("[data-ga-action]").each(function(){var e=$(this);e.on("change",function(){return d(e)})})},i=function(t,n,r){if(e)for(var i=0;i<e.trackingCodes.length;i++){var a=g(i,"set");t&&e.tracker(a,"campaignMedium",t),n&&e.tracker(a,"campaignName",n),r&&e.tracker(a,"campaignSource",r)}},a=function(t,n){if(e)for(var r=0;r<e.trackingCodes.length;r++)e.tracker(g(r,"set"),t,n)},s=function(t){if(e)for(var n=0;n<e.trackingCodes.length;n++)e.tracker(g(n,"set"),"page",t)},o=function(t){if(e)for(var n=0;n<e.trackingCodes.length;n++)e.tracker(g(n,"set"),"title",t)},u=function(t,n,r,i){if(e&&null!=t&&null!=n)for(var a=0;a<e.trackingCodes.length;a++)e.sendTitles||e.tracker(g(a,"set"),"title","Channel Page"),e.tracker(g(a,"send"),"event",t,n,r,void 0,i)},c=function(t,n){e&&(void 0===n&&(n=h(t)),null!==n&&u(n.category,n.action,n.label,n.fields))},l=function(){if(e)for(var t=0;t<e.trackingCodes.length;t++)e.sendTitles||e.tracker(g(t,"set"),"title","Channel Page"),e.tracker(g(t,"send"),"pageview")
},p=function(t,r){if(e&&(void 0===r&&(r=h(t)),null!==r)){var i=t.attr("id"),a=n[i];if(void 0!==a){for(var s in a){var o=r.inputActionPrefix+" | "+s,c=a[s];u(r.category,o,c,{"nonInteraction":!1})}n[i]={}}}},d=function(r){if(e){var i;i=r.is(":checkbox")?r.is(":checked"):r.is("select")?r.find(":selected").toArray().map(function(e){return $(e).data("ga-value")||$(e).val()}).join(" "):r.data("ga-value")||r.val();var a=r.closest("form");if(0!==a.length&&null!==i){var s=a.attr("id");void 0===s&&(s="ga-form-"+t++,a.attr("id",s));var o=n[s];void 0===o&&(o=n[s]={});var u=r.attr("data-ga-action"),c="false"===r.attr("data-ga-is-pii")?!1:!0,l=c?"PII Omitted":i;o[u]=l}}},h=function(e){var t=e.data("ga");return void 0===t?null:{"category":t[0],"action":t[1],"label":t[2],"inputActionPrefix":t[3],"fields":t[4]}},f=function(e){return"tracker_"+e},g=function(e,t){if(0==e)return t;var n=f(e);return n+"."+t};return{"init":function(t){if(t&&t.tracker&&t.trackingCodes&&0!==t.trackingCodes.length){e=t;var n={},i="auto";window.location.host.indexOf("stackexchange.com")>=0&&(i="stackexchange.com"),StackExchange.options.user.accountId&&(n.userId=StackExchange.options.user.accountId.toString()),e.tracker("create",t.trackingCodes[0],i,n);for(var a=1;a<t.trackingCodes.length;a++)e.tracker("create",t.trackingCodes[a],i,f(a),n);r($(document)),StackExchange.gaInitialized.resolve()}},"bindHandlers":r,"setCampaign":i,"setDimension":a,"setTitle":o,"setUrl":s,"track":u,"trackElement":c,"trackFormInputs":p,"trackPageView":l,"recordInputChange":d}}(),StackExchange.InlineAuth=function(){var e={"using_universal_ui":!1,"facebook_app_id":void 0,"facebook_login_params":{"scope":"email"},"provider_url":null,"getSsrc":function(e){var t=$('#login-form input[name="ssrc"]'),n=void 0;return t&&1===t.length&&(n=t.val()),n||(n=e),n},"init":function(){var t=[],n=[],r=[],i=[],a=[],s=null,o=null,u=null,c=null;this.setOAuthInfo("","");var l=function(e,t,n){if(!StackExchange.options.isMobile)return StackExchange.helpers.showMessage(e,t,n);if(0===e.next(".form-error").length){var r=$('<div class="form-error">').append($('<div class="message-text">').html(t));return e.after(r),r}};$("#openid-buttons").on("click",".major-provider",function(t){var n=$(this).data("provider");if(n){var r=!1;StackExchange.using("gps",function(){StackExchange.gps.track("signup.start",{"openid_provider":n,"location":e.getSsrc("signup_inline"),"tid":StackExchange.options.user.tid},!0)}),r=!0,e.signin($(this),t,r)}}),$(".major-provider").on("click",'.large-username input[type="button"]',function(){$("#login-form").submit()});var p=$("#se-login-fields");$(p).on("keyup","input[name=inline-password],input[name=inline-display-name],input[name=inline-email]",function(e){var t=$(e.target);if(!t.data("entered")){var n="signup."+t.attr("name").replace("display-","")+".entered";t.data("entered",!0),StackExchange.using("gps",function(){StackExchange.gps.track(n,{},!0)})}}),$("#se-login-fields").on("click","input[name=submit-button]",function(){StackExchange.using("gps",function(){StackExchange.gps.track("signup.se.click",{},!0)})}),$(".js-terms").on("click","a[name=privacy],a[name=tos]",function(e){var t=$(e.target),n="signup."+t.attr("name")+".click";StackExchange.using("gps",function(){StackExchange.gps.track(n,{},!0)})});var d=null,h=null,f=$("input.js-inline-signup"),g=function(){if(0===f.val().length){var e=function(e){return e.pStart+"Password must contain at least eight characters, including:"+e.pEnd+" "+e.listStart+" "+e.itemStart+" letters "+e.itemEnd+" "+e.itemStart+" numbers "+e.itemEnd+" "+e.listEnd}({"pStart":"<p>","pEnd":"</p>","listStart":"<ul>","listEnd":"</ul>","itemStart":"<li>","itemEnd":"</li>"});S(n,{"id":"pw-requirements","index":-1,"attachTo":f,"message":e})}else A(n,"pw-requirements"),_(!0);for(var t=null,r=0;r<n.length;r++)if(t){var i=t.index,a=n[r].index;i>a&&(t=n[r])}else t=n[r];t?d&&h==t.attachTo?d.find(".message-text").html(t.message):(d&&(d.remove(),h=null),h=t.attachTo,d=l(h,t.message,{"position":x(h),"css":{"width":"250px;","color":"#fff"},"cssClass":"_black","closeOthers":!1,"dismissable":!1,"type":"info"}),t.popup&&t.popup.fadeOutAndRemove()):d&&(d.remove(),d=null,h=null)};$('input.js-inline-signup, input[name="password2"]').on("keyup focus paste",g),$('input[name="submit-button"]').click(function(){d&&(d.remove(),d=null,h=null)});var m=$('<div class="caps-lock-warning"></div>').text("Caps lock is on"),v=$("input.js-inline-signup"),b=!1;v.keypress(function(e){var t=String.fromCharCode(e.which),n=/[a-z]/i.test(t);if(n){var r=t==t.toUpperCase();b=r&&!e.shiftKey}var i=document.msCapsLockWarningOff===!1,a=i;b&&!a?v.after(m):m.remove()}),v.blur(function(){m.remove()});var k=!1;$("#login-form input").blur(function(t){""==$(t.target).val()||k||(StackExchange.gps.track("signup.start",{"openid_provider":"Stack Exchange","location":e.getSsrc("signup_inline"),"tid":StackExchange.options.user.tid},!0),k=!0)}),$("#login-form input[type='text'], #login-form input[type='password'], #login-form input[type='email']").keypress(function(e){return 13===e.which?($("#submit-button").is(":hidden")?$("#login-form").submit():$("#login-form input[name='submit-button']").click(),e.preventDefault(),!1):void 0});var w=function(e,t){if(e.length>0){if(null!=t){for(var n=!0,r=0;r<e.length;r++)if(e[r].message==t.message){n=!1;break}e[0].changed=n}return e[0]}return null!=t&&t.popup&&t.popup.fadeOutAndRemove(),null},x=function(e){return{"my":e.data("error-my")||"left top","at":e.data("error-at")||"right center"}},E=function(e){null!=e&&(e.popup||(e.popup=l(e.attachTo,e.message,{"position":x(e.attachTo),"css":{"width":"120px;","color":"#fff"},"closeOthers":!1,"dismissable":!1})),e.changed&&(a.push(e.popup),e.popup=l(e.attachTo,e.message,{"position":x(e.attachTo),"css":{"width":"120px;","color":"#fff"},"closeOthers":!1,"dismissable":!1})))},y=function(){for(var e=0;e<a.length;e++)a[e]&&a[e].fadeOutAndRemove();a=[]},C=function(){E(s),E(o),E(c),E(u),setTimeout(y,StackExchange.options.isMobile?2e3:200)},A=function(e,t){for(var n="all"===t,r=0;r<e.length&&(e[r].id!=t&&!n||(e[r].popup&&a.push(e[r].popup),e.splice(r,1),n));r++);};this.removeAllErrors=function(){A(t,"all"),A(n,"all"),A(r,"all"),A(i,"all"),StackExchange.helpers.removeMessages(),StackExchange.options.isMobile&&$(".form-error").remove()};var S=StackExchange.Auth.addOrUpdateError,_=function(e){var t=$("input[name = 'inline-password']"),r=0===$.trim(t.val()).length;r&&!e?S(n,{"id":"pw-empty","index":0,"attachTo":t,"message":"Password cannot be empty."}):A(n,"pw-empty"),StackExchange.Auth.passwordStrengthValidation(t,n,A)},L=function(){var e=$("input[name='inline-email']"),n=0===$.trim(e.val()).length;n?S(t,{"id":"em-empty","index":0,"attachTo":e,"message":"Email cannot be empty."}):A(t,"em-empty")},D=function(){var e=$("input[name = 'recaptcha_response_field']"),t=e.length>0,n=t&&0===e.val().length;n?S(i,{"id":"cp","index":0,"attachTo":e,"message":"CAPTCHA cannot be empty."}):A(i,"cp")},q=function(){var e=$.trim($("input[name='inline-email']").val()).toUpperCase(),t=$("input[name='inline-display-name']"),n=$.trim(t.val()).toUpperCase();e===n&&""!=e?S(r,{"id":"nm","index":0,"attachTo":t,"message":"Name and email address must be different. If you don't want to enter a name, just leave it blank.","faileType":"name_email_same"}):A(r,"nm")},T=function(){return _(),q(),D(),L(),s=w(t,s),o=w(n,o),u=w(r,u),c=w(i,c),null==s&&null==o&&null==u&&null==c},P=!0;$("#login-form input[name='submit-button']").click(function(){var e={"isSignup":!0,"hasCaptcha":$("#recaptcha_response_field").length>0};$("#login-form input").each(function(t,n){var r=$(n).attr("name");r&&(r=r.replace(/(\W|_)/gi,""),e[r]=$(n).val())}),$.ajax({"url":"/users/login-or-signup/validation/track","data":e,"type":"POST","complete":function(){var e=T();return P&&($("#login-form input").blur(function(){T();var e=$("#login-form input[name='inline-email']"),n=$.trim(e.val());A(t,"em-ajax"),$.ajax({"type":"POST","url":"/users/signup/email/validate","data":{"email":n},"success":function(n){n.IsValid?s=null:(S(t,{"id":"em-ajax","index":1,"attachTo":e,"message":n.ErrorMessage}),s=w(t,s))},"complete":function(){C()}})}),P=!1),e?($("#login-form").submit(),void 0):(C(),void 0)}})})},"removeAllErrors":function(){},"facebookLogin":function(t,n){$("."+n).css("cursor","wait"),e.facebook_app_id?e.doJsFacebookLogin():(this.setOAuthInfo(t.oauth_version,t.oauth_server),$("#login-form").submit())},"oauth2Login":function(e,t){$("."+t).css("cursor","wait"),this.setOAuthInfo(e.oauth_version,e.oauth_server),$("#login-form").submit()},"doJsFacebookLogin":function(t){window.FB.login(function(e){if(e.authResponse){var n="/users/oauth/facebook/js?accessToken="+encodeURI(e.authResponse.accessToken)+"&fkey="+encodeURI(StackExchange.options.user.fkey);t&&(n+="&returnUrl="+encodeURI(t)),window.location=n}},e.facebook_login_params)},"signin":function(t,n,r){function i(t,n){var r="signup_inline";n||StackExchange.using("gps",function(){StackExchange.gps.track("signup.start",{"openid_provider":t,"location":e.getSsrc(r),"tid":StackExchange.options.user.tid},!0)}),t&&(StackExchange.using("gps",function(){StackExchange.gps.track("signup.openid.click",{"openid_provider":t,"location":r},!0)}),StackExchange.using("gps",function(){StackExchange.gps.track("openid.click",{"openid_provider":t,"location":r},!0)}))}function a(e){var t={"name":e.data("provider")};return e.data("oauthserver")&&(t.oauth_server=e.data("oauthserver")),e.data("oauthversion")&&(t.oauth_version=e.attr("data-oauthversion")),t}var s=t.data?a(t):t;if(s){if(i(s.name.replace(/_/g," "),r),"facebook"===s.name)return this.facebookLogin(s,s.name),void 0;if("2.0"===s.oauth_version)return this.oauth2Login(s,s.name),void 0;$("."+s.name).css("cursor","wait"),$("#login-form").submit()}},"setOAuthInfo":function(e,t){$("#oauth_version").val(e),$("#oauth_server").val(t)}};return{"init":function(){e.init()}}}();